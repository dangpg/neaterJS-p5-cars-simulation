!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("neaterJS",[],n):"object"==typeof exports?exports.neaterJS=n():t.neaterJS=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=5)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CONFIG=void 0;n.CONFIG={C1:1,C2:2,C3:4,COMPABILITY_THRESHOLD:3,PERCENTAGE_NEW_NODE:.03,PERCENTAGE_NEW_CONNECTION:.05,PERCENTAGE_MUTATION:.8,PERCENTAGE_MUTATION_ADJUST_WEIGHT:.9,STAGNATION_THRESHOLD:.05,ADJUST_WEIGHT_FACTOR:.2,NEW_WEIGHT_RANGE:1,ALLOW_LOOPS:!1}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,o=(i=e(2))&&i.__esModule?i:{default:i};function s(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(n,e,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.generation=n,this.numInputs=e,this.numOutputs=i,this.activation=o,this.fitness=u,this.species=r,this.brain=s}var n,e,i;return n=t,(e=[{key:"initialize",value:function(){this.brain=new o.default(this.numInputs,this.numOutputs,this.activation),this.brain.initialize()}},{key:"see",value:function(t){this.brain.setInputs(t)}},{key:"think",value:function(){return this.brain.activateNetwork()}},{key:"setFitness",value:function(t){this.fitness=t}},{key:"clone",value:function(){return new t(this.generation,this.numInputs,this.numOutputs,this.activation,this.brain.clone(),this.species,this.fitness)}}])&&s(n.prototype,e),i&&s(n,i),t}();n.default=r,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=c(e(7)),o=c(e(8)),s=c(e(9)),r=e(0),u=c(e(4)),a=e(3);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(n,e,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.connections=[],this.numInputNodes=n,this.numOutputNodes=e,this.activation=i}var n,e,c;return n=t,(e=[{key:"initialize",value:function(){this.nodes.push(new o.default(0,i.default.BIAS,1));for(var t=0;t<this.numInputNodes;t++)this.nodes.push(new o.default(1+t,i.default.INPUT));for(var n=0;n<this.numOutputNodes;n++)this.nodes.push(new o.default(1+this.numInputNodes+n,i.default.OUTPUT));for(var e=this.getInputNodes(),c=this.getOutputNodes(),h=0;h<c.length;h++){var f=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(0,h+this.numInputNodes+1,f,!0,u.default.getNextInnovationNumber(0,1+this.numInputNodes+h)))}for(var l=0;l<e.length;l++)for(var d=0;d<c.length;d++){var p=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(l+1,d+this.numInputNodes+1,p,!0,u.default.getNextInnovationNumber(1+l,1+this.numInputNodes+d)))}}},{key:"getBiasNode",value:function(){return this.nodes[0]}},{key:"getInputNodes",value:function(){return this.nodes.slice(1,1+this.numInputNodes)}},{key:"getOutputNodes",value:function(){return this.nodes.slice(1+this.numInputNodes,1+this.numInputNodes+this.numOutputNodes)}},{key:"getHiddenNodes",value:function(){return this.nodes.slice(1+this.numInputNodes+this.numOutputNodes)}},{key:"addNode",value:function(){var t=this.connections[Math.floor(Math.random()*this.connections.length)];t.enabled=!1;var n=new o.default(u.default.getNextNodeId(t),i.default.HIDDEN);this.nodes.push(n),this.connections.push(new s.default(t.start,n.id,1,!0,u.default.getNextInnovationNumber(t.start,n.id))),this.connections.push(new s.default(n.id,t.end,t.weight,!0,u.default.getNextInnovationNumber(n.id,t.end)))}},{key:"addConnection",value:function(){if(!(this.getHiddenNodes().length<1)){for(var t,n,e=0,i=!1,o=this.getHiddenNodes().concat(this.getOutputNodes());!i;){if(t=this.nodes[Math.floor(Math.random()*this.nodes.length)],n=o[Math.floor(Math.random()*o.length)],i=!this.alreadyConnected(t,n),!r.CONFIG.ALLOW_LOOPS&&(i=i&&!this.sameNode(t,n))){var c=new s.default(t.id,n.id,1,!0,-1);i=!!this.sortNodes(c)}if(++e>50)return}var h=(0,a.randomDoubleFromInterval)(r.CONFIG.NEW_WEIGHT_RANGE,-r.CONFIG.NEW_WEIGHT_RANGE);this.connections.push(new s.default(t.id,n.id,h,!0,u.default.getNextInnovationNumber(t.id,n.id)))}}},{key:"isFullyConnected",value:function(){var t=this.getHiddenNodes().length,n=0;r.CONFIG.ALLOW_LOOPS?n=this.numInputNodes*(t+this.numOutputNodes)+t*(t+this.numOutputNodes)+(t+this.numOutputNodes)+this.numOutputNodes*(t+this.numOutputNodes):n=this.numInputNodes*(t+this.numOutputNodes)+t*(t-1+this.numOutputNodes)+(t+this.numOutputNodes);return n===this.connections.length}},{key:"alreadyConnected",value:function(t,n){for(var e=0;e<this.connections.length;e++)if(this.connections[e].start===t.id&&this.connections[e].end===n.id)return!0;return!1}},{key:"sameNode",value:function(t,n){return!r.CONFIG.ALLOW_LOOPS&&t.id===n.id}},{key:"resetNetwork",value:function(){for(var t=1;t<=this.nodes;t++)this.nodes[t].outputValue=0}},{key:"setInputs",value:function(t){for(var n=1;n<=this.numInputNodes;n++)this.nodes[n].outputValue=t[n-1]}},{key:"activateNetwork",value:function(){if(r.CONFIG.ALLOW_LOOPS){for(var t=this.getHiddenNodes(),n=0;n<t.length;n++)this.activateNode(t[n]);for(var e=this.getOutputNodes(),i=0;i<e.length;i++)this.activateNode(e[i])}else for(var o=this.sortNodes(),s=1+this.numInputNodes;s<o.length;s++)this.activateNode(o[s]);return this.getOutputNodes().map(function(t){return t.outputValue})}},{key:"activateNode",value:function(t){for(var n=this,e=this.connections.filter(function(n){return n.end===t.id}),i=0,o=function(t){if(!e[t].enabled)return"continue";var o=n.nodes.find(function(n){return n.id===e[t].start});i+=o.outputValue*e[t].weight},s=0;s<e.length;s++)o(s);t.outputValue=this.activation(i)}},{key:"sortNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=[],e=[this.getBiasNode()].concat(this.getInputNodes()),i=this.getHiddenNodes().concat(this.getOutputNodes()),o=JSON.parse(JSON.stringify(this.connections.filter(function(t){return t.enabled})));t&&o.push(t);for(var s=function(){var t=e.splice(0,1)[0];n.push(t),o=o.filter(function(n){return n.start!==t.id});for(var s=function(t){o.some(function(n){return n.end===i[t].id})||e.push(i.splice(t,1)[0])},r=0;r<i.length;r++)s(r)};e.length>0;)s();return!(o.length>0)&&n}},{key:"clone",value:function(){for(var n=new t(this.numInputNodes,this.numOutputNodes,this.activation),e=0;e<this.nodes.length;e++)n.nodes.push(this.nodes[e].clone());for(var i=0;i<this.connections.length;i++)n.connections.push(this.connections[i].clone());return n}}])&&h(n.prototype,e),c&&h(n,c),t}();n.default=f,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.randomDoubleFromInterval=function(t,n){return Math.random()*(t-n)+n}},function(t,n,e){"use strict";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=new(function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.connectionCounter=-1,this.connectionDict=[],this.nodeCounter=-1,this.nodeDict=[]}var n,e,o;return n=t,(e=[{key:"getNextNodeId",value:function(t){return this.nodeDict.some(function(n){return n.start===t.start&&n.end===t.end})?this.nodeDict.find(function(n){return n.start===t.start&&n.end===t.end}).nodeId:(this.nodeCounter++,this.nodeDict.push({start:t.start,end:t.end,nodeId:this.nodeCounter}),this.nodeCounter)}},{key:"getNextInnovationNumber",value:function(t,n){return this.connectionDict.some(function(e){return e.start===t&&e.end===n})?this.connectionDict.find(function(e){return e.start===t&&e.end===n}).innovation:(this.connectionCounter++,this.connectionDict.push({start:t,end:n,innovation:this.connectionCounter}),this.connectionCounter)}}])&&i(n.prototype,e),o&&i(n,o),t}());n.default=o,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments[1],e=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.sigmoid,r=new o.default(t,n,e,i);return r.initialize(),r},Object.defineProperty(n,"CONFIG",{enumerable:!0,get:function(){return r.CONFIG}}),n.Activations=void 0;var i,o=(i=e(6))&&i.__esModule?i:{default:i},s=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};i.get||i.set?Object.defineProperty(n,e,i):n[e]=t[e]}return n.default=t,n}(e(11));n.Activations=s;var r=e(0)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e(1)),o=r(e(4)),s=r(e(10));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments[1],i=arguments[2],o=arguments[3];!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.population=[],this.populationSize=n,this.numInputs=e,this.numOutputs=i,this.activation=o,this.generation=0,this.bestFitness=0,this.numStagnated=0,this.speciesDict={}}var n,e,r;return n=t,(e=[{key:"initialize",value:function(){o.default.nodeCounter=this.numInputs+this.numOutputs;for(var t=0;t<this.populationSize;t++){var n=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);n.initialize(),this.population.push(n)}this.speciesDict[0]=new s.default(0,this.population[0].clone())}},{key:"getNumberOfSpecies",value:function(){return[].concat(u(new Set(this.population.map(function(t){return t.species})))).length}},{key:"getOverallChampion",value:function(){return this.population.reduce(function(t,n){return t.fitness>n.fitness?t:n})}},{key:"repopulate",value:function(){var t=this;if(this.generation>0){var n=function(n){var e=t.speciesDict[n];e.dropOrganisms(),e.isStagnated()&&(t.population=t.population.filter(function(t){return t.species!==e.id}),delete t.speciesDict[n])};for(var e in this.speciesDict)n(e);var o=this.getOverallChampion();o.fitness>this.bestFitness?(this.bestFitness=o.fitness,this.numStagnated=0):this.numStagnated++}this.generation++;for(var r=0,a=this.population.length;r<a;r++){var c=!1;for(var e in this.speciesDict){var h=this.speciesDict[e];if(h.isCompatibleWith(this.population[r])){c=!0,h.assignToSpecies(this.population[r]);break}}if(!c){var f=Math.max.apply(Math,u(Object.keys(this.speciesDict).map(function(t){return+t})))+1;this.speciesDict[f]=new s.default(f,this.population[r].clone()),this.speciesDict[f].assignToSpecies(this.population[r])}}for(var l in this.speciesDict){this.speciesDict[l].organisms.length<1&&delete this.speciesDict[l]}for(var d=[].concat(u(new Set(this.population.map(function(t){return t.species})))),p=0,v=d.length;p<v;p++){var m=this.speciesDict[d[p]].organisms,g=m[Math.floor(Math.random()*m.length)].clone();this.speciesDict[d[p]].representative=g}var b=0;for(var N in this.speciesDict){var O=this.speciesDict[N];O.sortOrganisms(),O.cull(),O.adjustFitness(),O.calculateFitnessSum(),O.getChampion(),b+=O.fitnessSum}for(var y in this.speciesDict){var I=this.speciesDict[y];I.numOffsprings=Math.floor(I.fitnessSum/b*this.population.length),I.organisms.length<2?(I.numCloning=I.numOffsprings,I.numCrossover=0):(I.numCloning=Math.floor(.25*I.numOffsprings),I.numCrossover=I.numOffsprings-I.numCloning)}for(var C in this.population=[],this.speciesDict){var _=this.speciesDict[C];_.numOffsprings>0&&(_.reproduce(),this.population=this.population.concat(_.offsprings))}if(this.population.length<this.populationSize){var E=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);E.initialize();var w=Math.max.apply(Math,u(Object.keys(this.speciesDict).map(function(t){return+t})))+1;for(this.speciesDict[w]=new s.default(w,E.clone()),this.speciesDict[w].assignToSpecies(E),this.population.push(E);this.population.length<this.populationSize;){var S=new i.default(this.generation,this.numInputs,this.numOutputs,this.activation);S.initialize(),this.speciesDict[w].assignToSpecies(S),this.population.push(S)}}return this.population}}])&&a(n.prototype,e),r&&a(n,r),t}();n.default=c,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={BIAS:"bias",INPUT:"input",OUTPUT:"output",HIDDEN:"hidden"},t.exports=n.default},function(t,n,e){"use strict";function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(n,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.type=e,this.outputValue=i}var n,e,o;return n=t,(e=[{key:"clone",value:function(){return new t(this.id,this.type,this.outputValue)}}])&&i(n.prototype,e),o&&i(n,o),t}();n.default=o,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(0),o=e(3);function s(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(n,e,i,o,s){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=n,this.end=e,this.weight=i,this.enabled=o,this.innovation=s}var n,e,r;return n=t,(e=[{key:"adjustWeight",value:function(){this.weight+=(0,o.randomDoubleFromInterval)(this.weight*i.CONFIG.ADJUST_WEIGHT_FACTOR,-this.weight*i.CONFIG.ADJUST_WEIGHT_FACTOR)}},{key:"reassignWeight",value:function(){this.weight=(0,o.randomDoubleFromInterval)(i.CONFIG.NEW_WEIGHT_RANGE,-i.CONFIG.NEW_WEIGHT_RANGE)}},{key:"clone",value:function(){return new t(this.start,this.end,this.weight,this.enabled,this.innovation)}}])&&s(n.prototype,e),r&&s(n,r),t}();n.default=r,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e(0),o=r(e(1)),s=r(e(2));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=n,this.representative=e,this.fitnessSum=0,this.organisms=[],this.numOffsprings=0,this.numCloning=0,this.numCrossover=0,this.offsprings=[],this.champion={},this.numStagnated=0}var n,e,r;return n=t,(e=[{key:"isStagnated",value:function(){return this.numStagnated>14}},{key:"dropOrganisms",value:function(){this.organisms=[],this.offsprings=[],this.fitnessSum=0,this.numOffsprings=0,this.numCloning=0,this.numCrossover=0}},{key:"assignToSpecies",value:function(t){t.species=this.id,this.organisms.push(t)}},{key:"adjustFitness",value:function(){for(var t=0,n=this.organisms.length;t<n;t++)this.organisms[t].fitness/=this.organisms.length}},{key:"calculateFitnessSum",value:function(){this.fitnessSum=0;for(var t=0,n=this.organisms.length;t<n;t++)this.fitnessSum+=this.organisms[t].fitness}},{key:"getChampion",value:function(){this.champion&&Math.abs(this.champion.fitness-this.organisms[0].fitness)<i.CONFIG.STAGNATION_THRESHOLD?this.numStagnated++:this.numStagnated=0,this.champion=this.organisms[0]}},{key:"isCompatibleWith",value:function(t){for(var n=this,e=0,o=0,s=0,r=0,a=this.representative.brain.connections[this.representative.brain.connections.length-1].innovation,c=t.brain.connections[t.brain.connections.length-1].innovation,h=[].concat(u(new Set([].concat(u(this.representative.brain.connections.map(function(t){return t.innovation})),u(t.brain.connections.map(function(t){return t.innovation})))))),f=function(i,u){n.representative.brain.connections.some(function(t){return t.innovation===h[i]})&&t.brain.connections.some(function(t){return t.innovation===h[i]})?(r+=Math.abs(n.representative.brain.connections.find(function(t){return t.innovation===h[i]}).weight-t.brain.connections.find(function(t){return t.innovation===h[i]}).weight),s++):n.representative.brain.connections.some(function(t){return t.innovation===h[i]})?h[i]<c?e++:o++:h[i]<a?e++:o++},l=0,d=h.length;l<d;l++)f(l);var p=s>0?r/s:0,v=Math.max(this.representative.brain.nodes.length+this.representative.brain.connections.length,t.brain.nodes.length+t.brain.connections.length);return i.CONFIG.C1*o/v+i.CONFIG.C2*e/v+i.CONFIG.C3*p<i.CONFIG.COMPABILITY_THRESHOLD}},{key:"sortOrganisms",value:function(){this.organisms.sort(function(t,n){return n.fitness-t.fitness})}},{key:"cull",value:function(){if(!(this.organisms.length<4)){this.calculateFitnessSum();for(var t=[],n=Math.floor(this.organisms.length/2);t.length<n;)for(var e=Math.random()*this.fitnessSum,i=0,o=0;o<this.organisms.length;o++)if((i+=this.organisms[o].fitness)>=e){var s=this.organisms.splice(o,1)[0];t.push(s),this.fitnessSum-=s.fitness;break}this.organisms=t}}},{key:"reproduce",value:function(){var t=this.champion.clone();t.generation+=1,this.offsprings.push(t),this.numCloning>0?this.numCloning--:this.numCrossover--;for(var n=0,e=this.numCloning;n<e;n++)for(var i=Math.random()*this.fitnessSum,o=0,s=0,r=this.organisms.length;s<r;s++)if((o+=this.organisms[s].fitness)>=i){var u=this.mutate(this.organisms[s]);u.generation++,this.offsprings.push(u);break}for(var a=0,c=this.numCrossover;a<c;a++){for(var h=Math.random()*this.fitnessSum,f=0,l=void 0,d=0,p=this.organisms.length;d<p;d++)if((f+=this.organisms[d].fitness)>=h){l=this.organisms[d];break}h=Math.random()*this.fitnessSum,f=0;var v=void 0;do{for(var m=0,g=this.organisms.length;m<g;m++)if((f+=this.organisms[m].fitness)>=h){v=this.organisms[m];break}h=Math.random()*this.fitnessSum,f=0}while(l===v);var b=this.mutate(this.crossover(l,v));this.offsprings.push(b)}}},{key:"mutate",value:function(t){for(var n=t.clone(),e=0,o=n.brain.connections.length;e<o;e++)Math.random()<i.CONFIG.PERCENTAGE_MUTATION&&(Math.random()<i.CONFIG.PERCENTAGE_MUTATION_ADJUST_WEIGHT?n.brain.connections[e].adjustWeight():n.brain.connections[e].reassignWeight());for(var s=0,r=n.brain.connections.filter(function(t){return!1===t.enabled}).length;s<r;s++)Math.random()<.25&&(n.brain.connections[s].enabled=!0);return Math.random()<i.CONFIG.PERCENTAGE_NEW_NODE&&n.brain.addNode(),Math.random()<i.CONFIG.PERCENTAGE_NEW_CONNECTION&&n.brain.addConnection(),n}},{key:"crossover",value:function(t,n){for(var e=new s.default(t.numInputs,t.numOutputs,t.activation),i=[].concat(u(new Set([].concat(u(t.brain.nodes.map(function(t){return t.id})),u(n.brain.nodes.map(function(t){return t.id})))))),r=function(o,s){t.brain.nodes.some(function(t){return t.id===i[o]})&&n.brain.nodes.some(function(t){return t.id===i[o]})&&(Math.random()<.5?e.nodes.push(t.brain.nodes.find(function(t){return t.id===i[o]}).clone()):e.nodes.push(n.brain.nodes.find(function(t){return t.id===i[o]}).clone()))},a=0,c=i.length;a<c;a++)r(a);var h=[].concat(u(new Set([].concat(u(t.brain.connections.map(function(t){return t.innovation})),u(n.brain.connections.map(function(t){return t.innovation})))))),f=function(i,o){t.brain.connections.some(function(t){return t.innovation===h[i]})&&n.brain.connections.some(function(t){return t.innovation===h[i]})?Math.random()<.5?e.connections.push(t.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):e.connections.push(n.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):t.brain.connections.some(function(t){return t.innovation===h[i]})?t.fitness>=n.fitness&&e.connections.push(t.brain.connections.find(function(t){return t.innovation===h[i]}).clone()):n.fitness>=t.fitness&&e.connections.push(n.brain.connections.find(function(t){return t.innovation===h[i]}).clone())};for(a=0,c=h.length;a<c;a++)f(a);var l=[].concat(u(new Set([].concat(u(e.connections.map(function(t){return t.start})),u(e.connections.map(function(t){return t.end})))))),d=function(i,o){e.nodes.find(function(t){return t.id===l[i]})||(t.brain.nodes.some(function(t){return t.id===l[i]})?e.nodes.push(t.brain.nodes.find(function(t){return t.id===l[i]}).clone()):e.nodes.push(n.brain.nodes.find(function(t){return t.id===l[i]}).clone()))};for(a=0,c=l.length;a<c;a++)d(a);return new o.default(t.generation+1,t.numInputs,t.numOutputs,t.activation,e,t.species)}}])&&a(n.prototype,e),r&&a(n,r),t}();n.default=c,t.exports=n.default},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sigmoid=function(t){return 1/(1+Math.pow(Math.E,-4.9*t))},n.tanh=function(t){return Math.tanh(t)},n.binaryStep=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t<n?0:1}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZWF0ZXJKUy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vbmVhdGVySlMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvY29uZmlnLmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9nZW5vbWUuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvaW5ub3ZhdGlvbi5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9uZWF0LmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL3R5cGVzLmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL25vZGUuanMiLCJ3ZWJwYWNrOi8vbmVhdGVySlMvLi9zcmMvY29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9uZWF0ZXJKUy8uL3NyYy9zcGVjaWVzLmpzIiwid2VicGFjazovL25lYXRlckpTLy4vc3JjL2FjdGl2YXRpb25zLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkMxIiwiQzIiLCJDMyIsIkNPTVBBQklMSVRZX1RIUkVTSE9MRCIsIlBFUkNFTlRBR0VfTkVXX05PREUiLCJQRVJDRU5UQUdFX05FV19DT05ORUNUSU9OIiwiUEVSQ0VOVEFHRV9NVVRBVElPTiIsIlBFUkNFTlRBR0VfTVVUQVRJT05fQURKVVNUX1dFSUdIVCIsIlNUQUdOQVRJT05fVEhSRVNIT0xEIiwiQURKVVNUX1dFSUdIVF9GQUNUT1IiLCJORVdfV0VJR0hUX1JBTkdFIiwiQUxMT1dfTE9PUFMiLCJfZ2Vub21lIiwiUGxheWVyIiwiZ2VuZXJhdGlvbiIsIm51bUlucHV0cyIsIm51bU91dHB1dHMiLCJhY3RpdmF0aW9uIiwiYnJhaW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzcGVjaWVzIiwiZml0bmVzcyIsIl9jbGFzc0NhbGxDaGVjayIsImRlZmF1bHQiLCJpbml0aWFsaXplIiwiaW5wdXRWYWx1ZXMiLCJzZXRJbnB1dHMiLCJhY3RpdmF0ZU5ldHdvcmsiLCJjbG9uZSIsIl90eXBlcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbm9kZSIsIl9jb25uZWN0aW9uIiwiX2NvbmZpZyIsIl9pbm5vdmF0aW9uIiwiX3V0aWxzIiwiR2Vub21lIiwibnVtSW5wdXROb2RlcyIsIm51bU91dHB1dE5vZGVzIiwibm9kZXMiLCJjb25uZWN0aW9ucyIsInB1c2giLCJCSUFTIiwiSU5QVVQiLCJPVVRQVVQiLCJpbnB1dE5vZGVzIiwiZ2V0SW5wdXROb2RlcyIsIm91dHB1dE5vZGVzIiwiZ2V0T3V0cHV0Tm9kZXMiLCJ3ZWlnaHQiLCJyYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwiLCJDT05GSUciLCJnZXROZXh0SW5ub3ZhdGlvbk51bWJlciIsImoiLCJzbGljZSIsImNvbm5lY3Rpb24iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJlbmFibGVkIiwibmV3Tm9kZSIsImdldE5leHROb2RlSWQiLCJISURERU4iLCJzdGFydCIsImlkIiwiZW5kIiwiZ2V0SGlkZGVuTm9kZXMiLCJub2RlMSIsIm5vZGUyIiwiY291bnQiLCJjb25uZWN0aW9uT2siLCJlbmROb2RlcyIsImNvbmNhdCIsImFscmVhZHlDb25uZWN0ZWQiLCJzYW1lTm9kZSIsInRlc3RDb25uZWN0aW9uIiwic29ydE5vZGVzIiwibnVtSGlkZGVuTm9kZXMiLCJzdW0iLCJvdXRwdXRWYWx1ZSIsImhpZGRlbk5vZGVzIiwiYWN0aXZhdGVOb2RlIiwic29ydGVkTm9kZXMiLCJtYXAiLCJub2RlIiwiX3RoaXMiLCJpbnB1dENvbm5lY3Rpb25zIiwiZmlsdGVyIiwibG9jYWxTdW0iLCJfbG9vcCIsInN0YXJ0Tm9kZSIsImZpbmQiLCJzdGFydE5vZGVzIiwiZ2V0Qmlhc05vZGUiLCJvdGhlck5vZGVzIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiX2xvb3AyIiwic3BsaWNlIiwiX2xvb3AzIiwic29tZSIsIm1heCIsIm1pbiIsIklubm92YXRpb24iLCJjb25uZWN0aW9uQ291bnRlciIsImNvbm5lY3Rpb25EaWN0Iiwibm9kZUNvdW50ZXIiLCJub2RlRGljdCIsIm5vZGVJZCIsImlubm92YXRpb24iLCJwb3B1bGF0aW9uU2l6ZSIsIkFjdGl2YXRpb25zIiwic2lnbW9pZCIsIm5lYXQiLCJfbmVhdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3BsYXllciIsIl9zcGVjaWVzNSIsIk5FQVQiLCJwb3B1bGF0aW9uIiwiYmVzdEZpdG5lc3MiLCJudW1TdGFnbmF0ZWQiLCJzcGVjaWVzRGljdCIsInBsYXllciIsIl90b0NvbnN1bWFibGVBcnJheSIsIlNldCIsInJlZHVjZSIsInByZXYiLCJjdXJyZW50IiwiZHJvcE9yZ2FuaXNtcyIsImlzU3RhZ25hdGVkIiwib3ZlcmFsbENoYW1waW9uIiwiZ2V0T3ZlcmFsbENoYW1waW9uIiwibGVuIiwic3BlY2llc0ZvdW5kIiwiaXNDb21wYXRpYmxlV2l0aCIsImFzc2lnblRvU3BlY2llcyIsIm5ld1NwZWNpZXNJZCIsImFwcGx5Iiwia2V5cyIsIm9yZ2FuaXNtcyIsInVuaXF1ZVNwZWNpZXMiLCJjYW5kaWRhdGVzIiwicmVwcmVzZW50YXRpdmUiLCJ0b3RhbEZpdG5lc3NTdW0iLCJzb3J0T3JnYW5pc21zIiwiY3VsbCIsImFkanVzdEZpdG5lc3MiLCJjYWxjdWxhdGVGaXRuZXNzU3VtIiwiZ2V0Q2hhbXBpb24iLCJmaXRuZXNzU3VtIiwibnVtT2Zmc3ByaW5ncyIsIm51bUNsb25pbmciLCJudW1Dcm9zc292ZXIiLCJyZXByb2R1Y2UiLCJvZmZzcHJpbmdzIiwibmV3UGxheWVyIiwiTm9kZSIsInR5cGUiLCJDb25uZWN0aW9uIiwiU3BlY2llcyIsImNoYW1waW9uIiwiYWJzIiwibnVtRGlzam9pbnRHZW5lcyIsIm51bUV4Y2Vzc0dlbmVzIiwibnVtTWF0Y2hpbmdHZW5lcyIsInN1bVdlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzIiwicmVwcmVzZW50YXRpdmVIaWdoZXN0SW5ub3ZhdGlvbiIsInBsYXllckhpZ2hlc3RJbm5vdmF0aW9uIiwiaW5ub3ZhdGlvblNldCIsImF2Z1dlaWdodERpZmZlcmVuY2VNYXRjaGluZ0dlbmVzIiwiTiIsInNvcnQiLCJhIiwiYiIsInN1cnZpdm9ycyIsIm51bVVwcGVySGFsZiIsInRocmVzaG9sZCIsInN1cnZpdm9yIiwiY2hhbXBpb25DbG9uZSIsImxlbjIiLCJvZmZzcHJpbmciLCJtdXRhdGUiLCJwYXJlbnQxIiwicGFyZW50MiIsImNyb3Nzb3ZlciIsInBhcmVudCIsImFkanVzdFdlaWdodCIsInJlYXNzaWduV2VpZ2h0IiwiYWRkTm9kZSIsImFkZENvbm5lY3Rpb24iLCJicmFpbk9mZnNwcmluZyIsIm5vZGVzU2V0IiwibmVlZGVkTm9kZXNTZXQiLCJfbG9vcDQiLCJ4IiwicG93IiwiRSIsInRhbmgiLCJzdGVwIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxl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QUFBQSxVQUFBLEdBQUwsR0FDbkMsT0FBT21MLEVBQUlJLEVBQU8sRUFBTSIsImZpbGUiOiJuZWF0ZXJKUy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIm5lYXRlckpTXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm5lYXRlckpTXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm5lYXRlckpTXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbiIsImV4cG9ydCBsZXQgQ09ORklHID0ge1xyXG4gIEMxOiAxLjAsXHJcbiAgQzI6IDIuMCxcclxuICBDMzogNC4wLFxyXG4gIENPTVBBQklMSVRZX1RIUkVTSE9MRDogMy4wLFxyXG4gIFBFUkNFTlRBR0VfTkVXX05PREU6IDAuMDMsXHJcbiAgUEVSQ0VOVEFHRV9ORVdfQ09OTkVDVElPTjogMC4wNSxcclxuICBQRVJDRU5UQUdFX01VVEFUSU9OOiAwLjgsXHJcbiAgUEVSQ0VOVEFHRV9NVVRBVElPTl9BREpVU1RfV0VJR0hUOiAwLjksXHJcbiAgU1RBR05BVElPTl9USFJFU0hPTEQ6IDAuMDUsXHJcbiAgQURKVVNUX1dFSUdIVF9GQUNUT1I6IDAuMixcclxuICBORVdfV0VJR0hUX1JBTkdFOiAxLjAsXHJcbiAgQUxMT1dfTE9PUFM6IGZhbHNlXHJcbn07XHJcbiIsImltcG9ydCBHZW5vbWUgZnJvbSAnLi9nZW5vbWUuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIHtcclxuICBjb25zdHJ1Y3RvcihnZW5lcmF0aW9uLCBudW1JbnB1dHMsIG51bU91dHB1dHMsIGFjdGl2YXRpb24sIGJyYWluID0ge30sIHNwZWNpZXMgPSAwLCBmaXRuZXNzID0gMC4wKSB7XHJcbiAgICB0aGlzLmdlbmVyYXRpb24gPSBnZW5lcmF0aW9uO1xyXG4gICAgdGhpcy5udW1JbnB1dHMgPSBudW1JbnB1dHM7XHJcbiAgICB0aGlzLm51bU91dHB1dHMgPSBudW1PdXRwdXRzO1xyXG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcclxuICAgIHRoaXMuZml0bmVzcyA9IGZpdG5lc3M7XHJcbiAgICB0aGlzLnNwZWNpZXMgPSBzcGVjaWVzO1xyXG4gICAgdGhpcy5icmFpbiA9IGJyYWluO1xyXG4gIH1cclxuXHJcbiAgaW5pdGlhbGl6ZSgpIHtcclxuICAgIHRoaXMuYnJhaW4gPSBuZXcgR2Vub21lKHRoaXMubnVtSW5wdXRzLCB0aGlzLm51bU91dHB1dHMsIHRoaXMuYWN0aXZhdGlvbik7XHJcbiAgICB0aGlzLmJyYWluLmluaXRpYWxpemUoKTtcclxuICB9XHJcblxyXG4gIC8vIHRlbGwgcGxheWVyIHdoYXQgaGUgc2Vlc1xyXG4gIHNlZShpbnB1dFZhbHVlcykge1xyXG4gICAgdGhpcy5icmFpbi5zZXRJbnB1dHMoaW5wdXRWYWx1ZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IG91dHB1dCB2YWx1ZXMgYWZ0ZXIgYWN0aXZhdGluZyB0aGUgcGxheWVyJ3MgbmV0d29ya1xyXG4gIHRoaW5rKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYnJhaW4uYWN0aXZhdGVOZXR3b3JrKCk7XHJcbiAgfVxyXG5cclxuICBzZXRGaXRuZXNzKGZpdG5lc3MpIHtcclxuICAgIHRoaXMuZml0bmVzcyA9IGZpdG5lc3M7XHJcbiAgfVxyXG5cclxuICBjbG9uZSgpIHtcclxuICAgIHJldHVybiBuZXcgUGxheWVyKFxyXG4gICAgICB0aGlzLmdlbmVyYXRpb24sXHJcbiAgICAgIHRoaXMubnVtSW5wdXRzLFxyXG4gICAgICB0aGlzLm51bU91dHB1dHMsXHJcbiAgICAgIHRoaXMuYWN0aXZhdGlvbixcclxuICAgICAgdGhpcy5icmFpbi5jbG9uZSgpLFxyXG4gICAgICB0aGlzLnNwZWNpZXMsXHJcbiAgICAgIHRoaXMuZml0bmVzc1xyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFR5cGVzIGZyb20gJy4vdHlwZXMuanMnO1xyXG5pbXBvcnQgTm9kZSBmcm9tICcuL25vZGUuanMnO1xyXG5pbXBvcnQgQ29ubmVjdGlvbiBmcm9tICcuL2Nvbm5lY3Rpb24uanMnO1xyXG5pbXBvcnQgeyBDT05GSUcgfSBmcm9tICcuL2NvbmZpZy5qcyc7XHJcbmltcG9ydCBJbm5vdmF0aW9uIGZyb20gJy4vaW5ub3ZhdGlvbi5qcyc7XHJcbmltcG9ydCB7IHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbCB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2Vub21lIHtcclxuICBjb25zdHJ1Y3RvcihudW1JbnB1dE5vZGVzLCBudW1PdXRwdXROb2RlcywgYWN0aXZhdGlvbikge1xyXG4gICAgLy8gQklBU3xJTlBVVDF8SU5QVVQyfE9VVFBVVHxISURERU5cclxuICAgIC8vIDAgICB8ICAgICAxfCAgICAgMnwgICAgIDN8ICAgICA0ICAgICAgUE9TSVRJT04gJiBJRFxyXG4gICAgdGhpcy5ub2RlcyA9IFtdO1xyXG4gICAgdGhpcy5jb25uZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5udW1JbnB1dE5vZGVzID0gbnVtSW5wdXROb2RlcztcclxuICAgIHRoaXMubnVtT3V0cHV0Tm9kZXMgPSBudW1PdXRwdXROb2RlcztcclxuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XHJcbiAgfVxyXG5cclxuICAvLyBjb25uZWN0IGlucHV0IGFuZCBiaWFzIG5vZGVzIHRvIG91dHB1dCBub2RlcyB3aXRoIHJhbmRvbSB3ZWlnaHRzXHJcbiAgaW5pdGlhbGl6ZSgpIHtcclxuICAgIC8vIGluc2VydCBCSUFTIG5vZGVcclxuICAgIHRoaXMubm9kZXMucHVzaChuZXcgTm9kZSgwLCBUeXBlcy5CSUFTLCAxLjApKTtcclxuXHJcbiAgICAvLyBpbnNlcnQgSU5QVVQgbm9kZXNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1JbnB1dE5vZGVzOyBpKyspIHtcclxuICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5ldyBOb2RlKDEgKyBpLCBUeXBlcy5JTlBVVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGluc2VydCBPVVRQVVQgbm9kZXNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1PdXRwdXROb2RlczsgaSsrKSB7XHJcbiAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgTm9kZSgxICsgdGhpcy5udW1JbnB1dE5vZGVzICsgaSwgVHlwZXMuT1VUUFVUKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGlucHV0Tm9kZXMgPSB0aGlzLmdldElucHV0Tm9kZXMoKTtcclxuICAgIGxldCBvdXRwdXROb2RlcyA9IHRoaXMuZ2V0T3V0cHV0Tm9kZXMoKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCB3ZWlnaHQgPSByYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwoQ09ORklHLk5FV19XRUlHSFRfUkFOR0UsIC1DT05GSUcuTkVXX1dFSUdIVF9SQU5HRSk7XHJcblxyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgbmV3IENvbm5lY3Rpb24oXHJcbiAgICAgICAgICAwLFxyXG4gICAgICAgICAgaSArIHRoaXMubnVtSW5wdXROb2RlcyArIDEsXHJcbiAgICAgICAgICB3ZWlnaHQsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgSW5ub3ZhdGlvbi5nZXROZXh0SW5ub3ZhdGlvbk51bWJlcigwLCAxICsgdGhpcy5udW1JbnB1dE5vZGVzICsgaSlcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb3V0cHV0Tm9kZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBsZXQgd2VpZ2h0ID0gcmFuZG9tRG91YmxlRnJvbUludGVydmFsKENPTkZJRy5ORVdfV0VJR0hUX1JBTkdFLCAtQ09ORklHLk5FV19XRUlHSFRfUkFOR0UpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgICBuZXcgQ29ubmVjdGlvbihcclxuICAgICAgICAgICAgaSArIDEsXHJcbiAgICAgICAgICAgIGogKyB0aGlzLm51bUlucHV0Tm9kZXMgKyAxLFxyXG4gICAgICAgICAgICB3ZWlnaHQsXHJcbiAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgIElubm92YXRpb24uZ2V0TmV4dElubm92YXRpb25OdW1iZXIoMSArIGksIDEgKyB0aGlzLm51bUlucHV0Tm9kZXMgKyBqKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEJpYXNOb2RlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubm9kZXNbMF07XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dE5vZGVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubm9kZXMuc2xpY2UoMSwgMSArIHRoaXMubnVtSW5wdXROb2Rlcyk7XHJcbiAgfVxyXG5cclxuICBnZXRPdXRwdXROb2RlcygpIHtcclxuICAgIHJldHVybiB0aGlzLm5vZGVzLnNsaWNlKDEgKyB0aGlzLm51bUlucHV0Tm9kZXMsIDEgKyB0aGlzLm51bUlucHV0Tm9kZXMgKyB0aGlzLm51bU91dHB1dE5vZGVzKTtcclxuICB9XHJcblxyXG4gIGdldEhpZGRlbk5vZGVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubm9kZXMuc2xpY2UoMSArIHRoaXMubnVtSW5wdXROb2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8gTXV0YXRpb246IGFkZCBuZXcgbm9kZSBpbiBiZXR3ZWVuIHR3byBub2RlcyB3aG8gd2VyZSBwcmV2aW91c2x5IGNvbm5lY3RlZFxyXG4gIC8vIGRpc2FibGUgb2xkIGNvbm5lY3Rpb24gYW5kIHJlcGxhY2UgaXQgd2l0aCBvbmUgbmV3IG5vZGUgYW5kIHR3byBuZXcgY29ubmVjdGlvbnNcclxuICAvLyBzdGFydCB0byBuZXcgbm9kZSBnZXRzIHdlaWdodCAxLjBcclxuICAvLyBuZXcgbm9kZSB0byBlbmQgZ2V0cyB3ZWlnaHQgb2Ygb2xkIGNvbm5lY3Rpb25cclxuICBhZGROb2RlKCkge1xyXG4gICAgbGV0IGNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuY29ubmVjdGlvbnMubGVuZ3RoKV07XHJcblxyXG4gICAgY29ubmVjdGlvbi5lbmFibGVkID0gZmFsc2U7XHJcbiAgICBsZXQgbmV3Tm9kZSA9IG5ldyBOb2RlKElubm92YXRpb24uZ2V0TmV4dE5vZGVJZChjb25uZWN0aW9uKSwgVHlwZXMuSElEREVOKTtcclxuXHJcbiAgICB0aGlzLm5vZGVzLnB1c2gobmV3Tm9kZSk7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgIG5ldyBDb25uZWN0aW9uKFxyXG4gICAgICAgIGNvbm5lY3Rpb24uc3RhcnQsXHJcbiAgICAgICAgbmV3Tm9kZS5pZCxcclxuICAgICAgICAxLjAsXHJcbiAgICAgICAgdHJ1ZSxcclxuICAgICAgICBJbm5vdmF0aW9uLmdldE5leHRJbm5vdmF0aW9uTnVtYmVyKGNvbm5lY3Rpb24uc3RhcnQsIG5ld05vZGUuaWQpXHJcbiAgICAgIClcclxuICAgICk7XHJcbiAgICB0aGlzLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgIG5ldyBDb25uZWN0aW9uKFxyXG4gICAgICAgIG5ld05vZGUuaWQsXHJcbiAgICAgICAgY29ubmVjdGlvbi5lbmQsXHJcbiAgICAgICAgY29ubmVjdGlvbi53ZWlnaHQsXHJcbiAgICAgICAgdHJ1ZSxcclxuICAgICAgICBJbm5vdmF0aW9uLmdldE5leHRJbm5vdmF0aW9uTnVtYmVyKG5ld05vZGUuaWQsIGNvbm5lY3Rpb24uZW5kKVxyXG4gICAgICApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gTXV0YXRpb246IGFkZCBuZXcgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byB1bmNvbm5lY3RlZCBub2Rlc1xyXG4gIC8vIGludmFsaWQgY29ubmVjdGlvbnM6XHJcbiAgLy8gIC0gYWxyZWFkeSBjb25uZWN0ZWQgbm9kZXNcclxuICAvLyAgLSB0d28gaW5wdXQgbm9kZXNcclxuICAvLyAgLSBpbnB1dCBub2RlIGFuZCBiaWFzXHJcbiAgLy8gIC0gc2FtZSBub2RlXHJcbiAgYWRkQ29ubmVjdGlvbigpIHtcclxuICAgIGlmICh0aGlzLmdldEhpZGRlbk5vZGVzKCkubGVuZ3RoIDwgMSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGxldCBjb25uZWN0aW9uT2sgPSBmYWxzZTtcclxuICAgIGxldCBub2RlMTtcclxuICAgIGxldCBub2RlMjtcclxuICAgIGxldCBlbmROb2RlcyA9IHRoaXMuZ2V0SGlkZGVuTm9kZXMoKS5jb25jYXQodGhpcy5nZXRPdXRwdXROb2RlcygpKTtcclxuXHJcbiAgICB3aGlsZSAoIWNvbm5lY3Rpb25Paykge1xyXG4gICAgICBub2RlMSA9IHRoaXMubm9kZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5ub2Rlcy5sZW5ndGgpXTtcclxuICAgICAgbm9kZTIgPSBlbmROb2Rlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBlbmROb2Rlcy5sZW5ndGgpXTtcclxuXHJcbiAgICAgIGNvbm5lY3Rpb25PayA9ICF0aGlzLmFscmVhZHlDb25uZWN0ZWQobm9kZTEsIG5vZGUyKTtcclxuXHJcbiAgICAgIGlmICghQ09ORklHLkFMTE9XX0xPT1BTKSB7XHJcbiAgICAgICAgY29ubmVjdGlvbk9rID0gY29ubmVjdGlvbk9rICYmICF0aGlzLnNhbWVOb2RlKG5vZGUxLCBub2RlMik7XHJcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25Paykge1xyXG4gICAgICAgICAgLy8gY2hlY2sgZm9yIGxvb3BzXHJcbiAgICAgICAgICBsZXQgdGVzdENvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihub2RlMS5pZCwgbm9kZTIuaWQsIDEuMCwgdHJ1ZSwgLTEpO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLnNvcnROb2Rlcyh0ZXN0Q29ubmVjdGlvbikpIHtcclxuICAgICAgICAgICAgY29ubmVjdGlvbk9rID0gdHJ1ZTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb25PayA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY291bnQrKztcclxuICAgICAgLy8gaWYgd2UgY2FuJ3QgZmluZCBhIHN1aXRhYmxlIGNvbm5lY3Rpb24gd2l0aGluIDUwIHRyaWVzLCByZXR1cm5cclxuICAgICAgaWYgKGNvdW50ID4gNTApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgd2VpZ2h0ID0gcmFuZG9tRG91YmxlRnJvbUludGVydmFsKENPTkZJRy5ORVdfV0VJR0hUX1JBTkdFLCAtQ09ORklHLk5FV19XRUlHSFRfUkFOR0UpO1xyXG5cclxuICAgIHRoaXMuY29ubmVjdGlvbnMucHVzaChcclxuICAgICAgbmV3IENvbm5lY3Rpb24obm9kZTEuaWQsIG5vZGUyLmlkLCB3ZWlnaHQsIHRydWUsIElubm92YXRpb24uZ2V0TmV4dElubm92YXRpb25OdW1iZXIobm9kZTEuaWQsIG5vZGUyLmlkKSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm5zIHRydWUgaWYgbmV0d29yayBpcyBmdWxseSBzYXRpc2ZpZWQsIGkuZS4gbm8gbmV3IGNvbm5lY3Rpb24gcG9zc2libGVcclxuICAvLyBpbnB1dCBub2RlcyBjYW4gYmUgY29ubmVjdGVkIHRvIGhpZGRlbiBhbmQgb3V0cHV0IG5vZGVzLCBubyBsb29wc1xyXG4gIC8vIGJpYXMgbm9kZXMgY2FuIGJlIGNvbm5lY2VkIHRvIGhpZGRlbiBhbmQgb3V0cHV0IG5vZGVzLCBubyBsb29wc1xyXG4gIC8vIGhpZGRlbiBub2RlcyBjYW4gYmUgb25seSBjb25uZWN0ZWQgdG8gaGlkZGVuIGFuZCBvdXRwdXQgbm9kZXNcclxuICAvLyBvdXRwdXQgbm9kZXMgY2FuIGJlIGNvbm5lY3RlZCB0byBoaWRkZW4gYW5kIG91dHB1dCBub2Rlc1xyXG4gIGlzRnVsbHlDb25uZWN0ZWQoKSB7XHJcbiAgICBjb25zdCBudW1IaWRkZW5Ob2RlcyA9IHRoaXMuZ2V0SGlkZGVuTm9kZXMoKS5sZW5ndGg7XHJcbiAgICBsZXQgc3VtID0gMDtcclxuXHJcbiAgICBpZiAoIUNPTkZJRy5BTExPV19MT09QUykge1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21JbnB1dCA9IHRoaXMubnVtSW5wdXROb2RlcyAqIChudW1IaWRkZW5Ob2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXMpO1xyXG4gICAgICBjb25zdCBudW1Db25uZWN0aW9uc0Zyb21IaWRkZW4gPSBudW1IaWRkZW5Ob2RlcyAqIChudW1IaWRkZW5Ob2RlcyAtIDEgKyB0aGlzLm51bU91dHB1dE5vZGVzKTtcclxuICAgICAgY29uc3QgbnVtQ29ubmVjdGlvbnNGcm9tQmlhcyA9IG51bUhpZGRlbk5vZGVzICsgdGhpcy5udW1PdXRwdXROb2RlcztcclxuXHJcbiAgICAgIHN1bSA9IG51bUNvbm5lY3Rpb25zRnJvbUlucHV0ICsgbnVtQ29ubmVjdGlvbnNGcm9tSGlkZGVuICsgbnVtQ29ubmVjdGlvbnNGcm9tQmlhcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IG51bUNvbm5lY3Rpb25zRnJvbUlucHV0ID0gdGhpcy5udW1JbnB1dE5vZGVzICogKG51bUhpZGRlbk5vZGVzICsgdGhpcy5udW1PdXRwdXROb2Rlcyk7XHJcbiAgICAgIGNvbnN0IG51bUNvbm5lY3Rpb25zRnJvbUhpZGRlbiA9IG51bUhpZGRlbk5vZGVzICogKG51bUhpZGRlbk5vZGVzICsgdGhpcy5udW1PdXRwdXROb2Rlcyk7XHJcbiAgICAgIGNvbnN0IG51bUNvbm5lY3Rpb25zRnJvbUJpYXMgPSBudW1IaWRkZW5Ob2RlcyArIHRoaXMubnVtT3V0cHV0Tm9kZXM7XHJcbiAgICAgIGNvbnN0IG51bUNvbm5lY3Rpb25zRnJvbU91dHB1dCA9IHRoaXMubnVtT3V0cHV0Tm9kZXMgKiAobnVtSGlkZGVuTm9kZXMgKyB0aGlzLm51bU91dHB1dE5vZGVzKTtcclxuXHJcbiAgICAgIHN1bSA9IG51bUNvbm5lY3Rpb25zRnJvbUlucHV0ICsgbnVtQ29ubmVjdGlvbnNGcm9tSGlkZGVuICsgbnVtQ29ubmVjdGlvbnNGcm9tQmlhcyArIG51bUNvbm5lY3Rpb25zRnJvbU91dHB1dDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3VtID09PSB0aGlzLmNvbm5lY3Rpb25zLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGFscmVhZHlDb25uZWN0ZWQobm9kZTEsIG5vZGUyKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29ubmVjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnNbaV0uc3RhcnQgPT09IG5vZGUxLmlkICYmIHRoaXMuY29ubmVjdGlvbnNbaV0uZW5kID09PSBub2RlMi5pZCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBzYW1lTm9kZShub2RlMSwgbm9kZTIpIHtcclxuICAgIGlmIChDT05GSUcuQUxMT1dfTE9PUFMpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vZGUxLmlkID09PSBub2RlMi5pZDtcclxuICB9XHJcblxyXG4gIHJlc2V0TmV0d29yaygpIHtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMubm9kZXM7IGkrKykge1xyXG4gICAgICB0aGlzLm5vZGVzW2ldLm91dHB1dFZhbHVlID0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldElucHV0cyhpbnB1dFZhbHVlcykge1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdGhpcy5udW1JbnB1dE5vZGVzOyBpKyspIHtcclxuICAgICAgdGhpcy5ub2Rlc1tpXS5vdXRwdXRWYWx1ZSA9IGlucHV0VmFsdWVzW2kgLSAxXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTmV0d29yaygpIHtcclxuICAgIGlmICghQ09ORklHLkFMTE9XX0xPT1BTKSB7XHJcbiAgICAgIGxldCBzb3J0ZWROb2RlcyA9IHRoaXMuc29ydE5vZGVzKCk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMSArIHRoaXMubnVtSW5wdXROb2RlczsgaSA8IHNvcnRlZE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZU5vZGUoc29ydGVkTm9kZXNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBhY3RpdmF0ZSBoaWRkZW4gbm9kZXMsIHRoZW4gb3V0cHV0IG5vZGVzXHJcbiAgICAgIGxldCBoaWRkZW5Ob2RlcyA9IHRoaXMuZ2V0SGlkZGVuTm9kZXMoKTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGlkZGVuTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmFjdGl2YXRlTm9kZShoaWRkZW5Ob2Rlc1tpXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBvdXRwdXROb2RlcyA9IHRoaXMuZ2V0T3V0cHV0Tm9kZXMoKTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0Tm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmFjdGl2YXRlTm9kZShvdXRwdXROb2Rlc1tpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyByZXR1cm4gb3V0cHV0IHZhbHVlc1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0T3V0cHV0Tm9kZXMoKS5tYXAobiA9PiBuLm91dHB1dFZhbHVlKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlTm9kZShub2RlKSB7XHJcbiAgICAvLyBkbyBub3QgZmlyZSBpZiBkaXNhYmxlZFxyXG4gICAgbGV0IGlucHV0Q29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25zLmZpbHRlcihjID0+IGMuZW5kID09PSBub2RlLmlkKTtcclxuICAgIGxldCBsb2NhbFN1bSA9IDAuMDtcclxuXHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGlucHV0Q29ubmVjdGlvbnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKCFpbnB1dENvbm5lY3Rpb25zW2pdLmVuYWJsZWQpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHN0YXJ0Tm9kZSA9IHRoaXMubm9kZXMuZmluZChuID0+IG4uaWQgPT09IGlucHV0Q29ubmVjdGlvbnNbal0uc3RhcnQpO1xyXG5cclxuICAgICAgbG9jYWxTdW0gKz0gc3RhcnROb2RlLm91dHB1dFZhbHVlICogaW5wdXRDb25uZWN0aW9uc1tqXS53ZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS5vdXRwdXRWYWx1ZSA9IHRoaXMuYWN0aXZhdGlvbihsb2NhbFN1bSk7XHJcbiAgfVxyXG5cclxuICBzb3J0Tm9kZXModGVzdENvbm5lY3Rpb24gPSBudWxsKSB7XHJcbiAgICBsZXQgc29ydGVkTm9kZXMgPSBbXTtcclxuICAgIGxldCBzdGFydE5vZGVzID0gW3RoaXMuZ2V0Qmlhc05vZGUoKV0uY29uY2F0KHRoaXMuZ2V0SW5wdXROb2RlcygpKTtcclxuICAgIGxldCBvdGhlck5vZGVzID0gdGhpcy5nZXRIaWRkZW5Ob2RlcygpLmNvbmNhdCh0aGlzLmdldE91dHB1dE5vZGVzKCkpO1xyXG5cclxuICAgIGxldCBjb25uZWN0aW9ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb25uZWN0aW9ucy5maWx0ZXIoYyA9PiBjLmVuYWJsZWQpKSk7XHJcblxyXG4gICAgaWYgKHRlc3RDb25uZWN0aW9uKSB7XHJcbiAgICAgIGNvbm5lY3Rpb25zLnB1c2godGVzdENvbm5lY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlIChzdGFydE5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgbGV0IG5vZGUgPSBzdGFydE5vZGVzLnNwbGljZSgwLCAxKVswXTtcclxuXHJcbiAgICAgIHNvcnRlZE5vZGVzLnB1c2gobm9kZSk7XHJcblxyXG4gICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihjID0+IGMuc3RhcnQgIT09IG5vZGUuaWQpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG90aGVyTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmVuZCA9PT0gb3RoZXJOb2Rlc1tpXS5pZCkpIHtcclxuICAgICAgICAgIHN0YXJ0Tm9kZXMucHVzaChvdGhlck5vZGVzLnNwbGljZShpLCAxKVswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbm5lY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNvcnRlZE5vZGVzO1xyXG4gIH1cclxuXHJcbiAgY2xvbmUoKSB7XHJcbiAgICBsZXQgY2xvbmUgPSBuZXcgR2Vub21lKHRoaXMubnVtSW5wdXROb2RlcywgdGhpcy5udW1PdXRwdXROb2RlcywgdGhpcy5hY3RpdmF0aW9uKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2xvbmUubm9kZXMucHVzaCh0aGlzLm5vZGVzW2ldLmNsb25lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25uZWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjbG9uZS5jb25uZWN0aW9ucy5wdXNoKHRoaXMuY29ubmVjdGlvbnNbaV0uY2xvbmUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNsb25lO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gcmFuZG9tRG91YmxlRnJvbUludGVydmFsKG1heCwgbWluKSB7XHJcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcclxufVxyXG4iLCJjbGFzcyBJbm5vdmF0aW9uIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY29ubmVjdGlvbkNvdW50ZXIgPSAtMTtcclxuICAgIHRoaXMuY29ubmVjdGlvbkRpY3QgPSBbXTtcclxuICAgIHRoaXMubm9kZUNvdW50ZXIgPSAtMTtcclxuICAgIHRoaXMubm9kZURpY3QgPSBbXTtcclxuICB9XHJcblxyXG4gIGdldE5leHROb2RlSWQoY29ubmVjdGlvbikge1xyXG4gICAgaWYgKHRoaXMubm9kZURpY3Quc29tZShjID0+IGMuc3RhcnQgPT09IGNvbm5lY3Rpb24uc3RhcnQgJiYgYy5lbmQgPT09IGNvbm5lY3Rpb24uZW5kKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ub2RlRGljdC5maW5kKGMgPT4gYy5zdGFydCA9PT0gY29ubmVjdGlvbi5zdGFydCAmJiBjLmVuZCA9PT0gY29ubmVjdGlvbi5lbmQpLm5vZGVJZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm5vZGVDb3VudGVyKys7XHJcbiAgICB0aGlzLm5vZGVEaWN0LnB1c2goeyBzdGFydDogY29ubmVjdGlvbi5zdGFydCwgZW5kOiBjb25uZWN0aW9uLmVuZCwgbm9kZUlkOiB0aGlzLm5vZGVDb3VudGVyIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMubm9kZUNvdW50ZXI7XHJcbiAgfVxyXG5cclxuICBnZXROZXh0SW5ub3ZhdGlvbk51bWJlcihzdGFydCwgZW5kKSB7XHJcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uRGljdC5zb21lKGMgPT4gYy5zdGFydCA9PT0gc3RhcnQgJiYgYy5lbmQgPT09IGVuZCkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbkRpY3QuZmluZChjID0+IGMuc3RhcnQgPT09IHN0YXJ0ICYmIGMuZW5kID09PSBlbmQpLmlubm92YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jb25uZWN0aW9uQ291bnRlcisrO1xyXG4gICAgdGhpcy5jb25uZWN0aW9uRGljdC5wdXNoKHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCwgaW5ub3ZhdGlvbjogdGhpcy5jb25uZWN0aW9uQ291bnRlciB9KTtcclxuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25Db3VudGVyO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IElubm92YXRpb24oKTtcclxuIiwiaW1wb3J0IE5FQVQgZnJvbSAnLi9uZWF0LmpzJztcclxuaW1wb3J0ICogYXMgQWN0aXZhdGlvbnMgZnJvbSAnLi9hY3RpdmF0aW9ucy5qcyc7XHJcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vY29uZmlnLmpzJztcclxuXHJcbmV4cG9ydCB7IEFjdGl2YXRpb25zLCBDT05GSUcgfTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0KHBvcHVsYXRpb25TaXplID0gMTAwLCBudW1JbnB1dHMsIG51bU91dHB1dHMsIGFjdGl2YXRpb24gPSBBY3RpdmF0aW9ucy5zaWdtb2lkKSB7XHJcbiAgbGV0IG5lYXQgPSBuZXcgTkVBVChwb3B1bGF0aW9uU2l6ZSwgbnVtSW5wdXRzLCBudW1PdXRwdXRzLCBhY3RpdmF0aW9uKTtcclxuXHJcbiAgbmVhdC5pbml0aWFsaXplKCk7XHJcbiAgcmV0dXJuIG5lYXQ7XHJcbn1cclxuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllci5qcyc7XHJcbmltcG9ydCBJbm5vdmF0aW9uIGZyb20gJy4vaW5ub3ZhdGlvbi5qcyc7XHJcbmltcG9ydCBTcGVjaWVzIGZyb20gJy4vc3BlY2llcy5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBORUFUIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1bGF0aW9uU2l6ZSA9IDEwMCwgbnVtSW5wdXRzLCBudW1PdXRwdXRzLCBhY3RpdmF0aW9uKSB7XHJcbiAgICB0aGlzLnBvcHVsYXRpb24gPSBbXTtcclxuICAgIHRoaXMucG9wdWxhdGlvblNpemUgPSBwb3B1bGF0aW9uU2l6ZTtcclxuICAgIHRoaXMubnVtSW5wdXRzID0gbnVtSW5wdXRzO1xyXG4gICAgdGhpcy5udW1PdXRwdXRzID0gbnVtT3V0cHV0cztcclxuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XHJcbiAgICB0aGlzLmdlbmVyYXRpb24gPSAwO1xyXG4gICAgdGhpcy5iZXN0Rml0bmVzcyA9IDA7XHJcbiAgICB0aGlzLm51bVN0YWduYXRlZCA9IDA7XHJcbiAgICB0aGlzLnNwZWNpZXNEaWN0ID0ge307XHJcbiAgfVxyXG5cclxuICBpbml0aWFsaXplKCkge1xyXG4gICAgSW5ub3ZhdGlvbi5ub2RlQ291bnRlciA9IHRoaXMubnVtSW5wdXRzICsgdGhpcy5udW1PdXRwdXRzO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wb3B1bGF0aW9uU2l6ZTsgaSsrKSB7XHJcbiAgICAgIGxldCBwbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMuZ2VuZXJhdGlvbiwgdGhpcy5udW1JbnB1dHMsIHRoaXMubnVtT3V0cHV0cywgdGhpcy5hY3RpdmF0aW9uKTtcclxuXHJcbiAgICAgIHBsYXllci5pbml0aWFsaXplKCk7XHJcbiAgICAgIHRoaXMucG9wdWxhdGlvbi5wdXNoKHBsYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zcGVjaWVzRGljdFswXSA9IG5ldyBTcGVjaWVzKDAsIHRoaXMucG9wdWxhdGlvblswXS5jbG9uZSgpKTtcclxuICB9XHJcblxyXG4gIGdldE51bWJlck9mU3BlY2llcygpIHtcclxuICAgIHJldHVybiBbLi4ubmV3IFNldCh0aGlzLnBvcHVsYXRpb24ubWFwKHAgPT4gcC5zcGVjaWVzKSldLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIGdldE92ZXJhbGxDaGFtcGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnBvcHVsYXRpb24ucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiAocHJldi5maXRuZXNzID4gY3VycmVudC5maXRuZXNzID8gcHJldiA6IGN1cnJlbnQpKTtcclxuICB9XHJcblxyXG4gIHJlcG9wdWxhdGUoKSB7XHJcbiAgICAvLyByZXNldCBvcmdhbmlzbXNcclxuICAgIGlmICh0aGlzLmdlbmVyYXRpb24gPiAwKSB7XHJcbiAgICAgIGZvciAobGV0IGogaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICAgIGxldCBzcGVjaWVzID0gdGhpcy5zcGVjaWVzRGljdFtqXTtcclxuXHJcbiAgICAgICAgc3BlY2llcy5kcm9wT3JnYW5pc21zKCk7XHJcblxyXG4gICAgICAgIGlmIChzcGVjaWVzLmlzU3RhZ25hdGVkKCkpIHtcclxuICAgICAgICAgIHRoaXMucG9wdWxhdGlvbiA9IHRoaXMucG9wdWxhdGlvbi5maWx0ZXIocCA9PiBwLnNwZWNpZXMgIT09IHNwZWNpZXMuaWQpO1xyXG4gICAgICAgICAgZGVsZXRlIHRoaXMuc3BlY2llc0RpY3Rbal07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgb3ZlcmFsbENoYW1waW9uID0gdGhpcy5nZXRPdmVyYWxsQ2hhbXBpb24oKTtcclxuXHJcbiAgICAgIGlmIChvdmVyYWxsQ2hhbXBpb24uZml0bmVzcyA+IHRoaXMuYmVzdEZpdG5lc3MpIHtcclxuICAgICAgICB0aGlzLmJlc3RGaXRuZXNzID0gb3ZlcmFsbENoYW1waW9uLmZpdG5lc3M7XHJcbiAgICAgICAgdGhpcy5udW1TdGFnbmF0ZWQgPSAwO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubnVtU3RhZ25hdGVkKys7XHJcblxyXG4gICAgICAgIC8vIG5vIGltcHJvdmVtZW50cyBvdmVyIDIwIGdlbmVyYXRpb25zLCBvbmx5IGxldCB0aGUgdHdvIGJlc3Qgc3BlY2llcyByZXByb2R1Y2VcclxuICAgICAgICAvLyBpZiAodGhpcy5udW1TdGFnbmF0ZWQgPiAxOSkge1xyXG4gICAgICAgIC8vICAgdGhpcy5udW1TdGFnbmF0ZWQgPSAwO1xyXG5cclxuICAgICAgICAvLyAgIGlmIChbLi4ubmV3IFNldCh0aGlzLnBvcHVsYXRpb24ubWFwKHAgPT4gcC5zcGVjaWVzKSldLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAvLyAgICAgbGV0IGNsb25lZFBvcHVsYXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucG9wdWxhdGlvbikpLnNvcnQoKGEsIGIpID0+IGIuZml0bmVzcyAtIGEuZml0bmVzcyk7XHJcbiAgICAgICAgLy8gICAgIGxldCBzcGVjaWVzSWQxID0gY2xvbmVkUG9wdWxhdGlvblswXS5zcGVjaWVzO1xyXG4gICAgICAgIC8vICAgICBsZXQgc3BlY2llc0lkMjtcclxuXHJcbiAgICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xvbmVkUG9wdWxhdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgIGlmIChjbG9uZWRQb3B1bGF0aW9uW2ldLnNwZWNpZXMgIT09IHNwZWNpZXNJZDEpIHtcclxuICAgICAgICAvLyAgICAgICAgIHNwZWNpZXNJZDIgPSBjbG9uZWRQb3B1bGF0aW9uW2ldLnNwZWNpZXM7XHJcbiAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgIHRoaXMucG9wdWxhdGlvbiA9IHRoaXMucG9wdWxhdGlvbi5maWx0ZXIocCA9PiBwLnNwZWNpZXMgPT09IHNwZWNpZXNJZDEgfHwgcC5zcGVjaWVzID09PSBzcGVjaWVzSWQyKTtcclxuICAgICAgICAvLyAgICAgZm9yIChsZXQgaiBpbiB0aGlzLnNwZWNpZXNEaWN0KSB7XHJcbiAgICAgICAgLy8gICAgICAgbGV0IHNwZWNpZXMgPSB0aGlzLnNwZWNpZXNEaWN0W2pdO1xyXG5cclxuICAgICAgICAvLyAgICAgICBpZiAoc3BlY2llcy5pZCAhPT0gc3BlY2llc0lkMSAmJiBzcGVjaWVzLmlkICE9PSBzcGVjaWVzSWQyKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBkZWxldGUgdGhpcy5zcGVjaWVzRGljdFtqXTtcclxuICAgICAgICAvLyAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdlbmVyYXRpb24rKztcclxuXHJcbiAgICAvLyBhc3NpZ24gcG9wdWxhdGlvbiB0byBzcGVjaWVzXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5wb3B1bGF0aW9uLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGxldCBzcGVjaWVzRm91bmQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGZvciAobGV0IGogaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICAgIGxldCBzcGVjaWVzID0gdGhpcy5zcGVjaWVzRGljdFtqXTtcclxuXHJcbiAgICAgICAgaWYgKHNwZWNpZXMuaXNDb21wYXRpYmxlV2l0aCh0aGlzLnBvcHVsYXRpb25baV0pKSB7XHJcbiAgICAgICAgICBzcGVjaWVzRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgc3BlY2llcy5hc3NpZ25Ub1NwZWNpZXModGhpcy5wb3B1bGF0aW9uW2ldKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFzcGVjaWVzRm91bmQpIHtcclxuICAgICAgICBjb25zdCBuZXdTcGVjaWVzSWQgPSBNYXRoLm1heCguLi5PYmplY3Qua2V5cyh0aGlzLnNwZWNpZXNEaWN0KS5tYXAoaWQgPT4gK2lkKSkgKyAxO1xyXG5cclxuICAgICAgICB0aGlzLnNwZWNpZXNEaWN0W25ld1NwZWNpZXNJZF0gPSBuZXcgU3BlY2llcyhuZXdTcGVjaWVzSWQsIHRoaXMucG9wdWxhdGlvbltpXS5jbG9uZSgpKTtcclxuICAgICAgICB0aGlzLnNwZWNpZXNEaWN0W25ld1NwZWNpZXNJZF0uYXNzaWduVG9TcGVjaWVzKHRoaXMucG9wdWxhdGlvbltpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBkZWxldGUgc3BlY2llcyB3aXRoIG5vdCBlbm91Z2ggb3JnYW5pc21zXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICBsZXQgc3BlY2llcyA9IHRoaXMuc3BlY2llc0RpY3Rba2V5XTtcclxuXHJcbiAgICAgIGlmIChzcGVjaWVzLm9yZ2FuaXNtcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgLy8gdGhpcy5wb3B1bGF0aW9uID0gdGhpcy5wb3B1bGF0aW9uLmZpbHRlcihwID0+IHAuc3BlY2llcyAhPT0gc3BlY2llcy5pZCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BlY2llc0RpY3Rba2V5XTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHVwZGF0ZSByZXByZXNlbnRhdGl2ZSBwZXIgc3BlY2llcyAoZm9yIG5leHQgZ2VuZXJhdGlvbilcclxuICAgIGNvbnN0IHVuaXF1ZVNwZWNpZXMgPSBbLi4ubmV3IFNldCh0aGlzLnBvcHVsYXRpb24ubWFwKHAgPT4gcC5zcGVjaWVzKSldO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB1bmlxdWVTcGVjaWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSB0aGlzLnNwZWNpZXNEaWN0W3VuaXF1ZVNwZWNpZXNbaV1dLm9yZ2FuaXNtcztcclxuICAgICAgY29uc3QgcmVwcmVzZW50YXRpdmUgPSBjYW5kaWRhdGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNhbmRpZGF0ZXMubGVuZ3RoKV0uY2xvbmUoKTtcclxuXHJcbiAgICAgIHRoaXMuc3BlY2llc0RpY3RbdW5pcXVlU3BlY2llc1tpXV0ucmVwcmVzZW50YXRpdmUgPSByZXByZXNlbnRhdGl2ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzb3J0IHNwZWNpZXMnIG9yZ2FuaXNtcywgZHJvcCBib3R0b20gaGFsZiBwZXIgc3BlY2llcywgYWRqdXN0IGZpdG5lc3MgYW5kIGRlY2xhcmUgY2hhbXBpb25cclxuICAgIC8vIGNhbGN1bGF0ZSB0b3RhbCBmaXRuZXNzIHN1bVxyXG4gICAgbGV0IHRvdGFsRml0bmVzc1N1bSA9IDAuMDtcclxuXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5zcGVjaWVzRGljdCkge1xyXG4gICAgICBjb25zdCBzcGVjaWVzID0gdGhpcy5zcGVjaWVzRGljdFtrZXldO1xyXG5cclxuICAgICAgc3BlY2llcy5zb3J0T3JnYW5pc21zKCk7XHJcbiAgICAgIHNwZWNpZXMuY3VsbCgpO1xyXG4gICAgICBzcGVjaWVzLmFkanVzdEZpdG5lc3MoKTtcclxuICAgICAgc3BlY2llcy5jYWxjdWxhdGVGaXRuZXNzU3VtKCk7XHJcbiAgICAgIHNwZWNpZXMuZ2V0Q2hhbXBpb24oKTtcclxuICAgICAgdG90YWxGaXRuZXNzU3VtICs9IHNwZWNpZXMuZml0bmVzc1N1bTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWNpZGUgaG93IG1hbnkgb2ZmIHNwcmluZ3Mgd2UgbmVlZCBwZXIgc3BlY2llcyAoYmFzZWQgb24gZml0bmVzcyBzdW0gZGlzdHJpYnV0aW9uKVxyXG4gICAgLy8gZS5nLiAxMDAgb2ZmIHNwcmluZ3MgaW4gc3BlY2llcyAyXHJcbiAgICAvLyAyNSUgY3JlYXRlZCBieSBjbG9uaW5nXHJcbiAgICAvLyA3NSUgY3JlYXRlZCBieSBjcm9zc292ZXJcclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgZm9yIChsZXQga2V5IGluIHRoaXMuc3BlY2llc0RpY3QpIHtcclxuICAgICAgY29uc3Qgc3BlY2llcyA9IHRoaXMuc3BlY2llc0RpY3Rba2V5XTtcclxuXHJcbiAgICAgIHNwZWNpZXMubnVtT2Zmc3ByaW5ncyA9IE1hdGguZmxvb3IoKHNwZWNpZXMuZml0bmVzc1N1bSAvIHRvdGFsRml0bmVzc1N1bSkgKiB0aGlzLnBvcHVsYXRpb24ubGVuZ3RoKTtcclxuXHJcbiAgICAgIGlmIChzcGVjaWVzLm9yZ2FuaXNtcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgc3BlY2llcy5udW1DbG9uaW5nID0gc3BlY2llcy5udW1PZmZzcHJpbmdzO1xyXG4gICAgICAgIHNwZWNpZXMubnVtQ3Jvc3NvdmVyID0gMDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzcGVjaWVzLm51bUNsb25pbmcgPSBNYXRoLmZsb29yKDAuMjUgKiBzcGVjaWVzLm51bU9mZnNwcmluZ3MpO1xyXG4gICAgICAgIHNwZWNpZXMubnVtQ3Jvc3NvdmVyID0gc3BlY2llcy5udW1PZmZzcHJpbmdzIC0gc3BlY2llcy5udW1DbG9uaW5nO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVwcm9kdWNlIGFuZCBhc3NpZ24gb2Zmc3ByaW5nIHRvIG5ldyBwb3B1bGF0aW9uXHJcbiAgICB0aGlzLnBvcHVsYXRpb24gPSBbXTtcclxuICAgIGZvciAobGV0IGtleSBpbiB0aGlzLnNwZWNpZXNEaWN0KSB7XHJcbiAgICAgIGNvbnN0IHNwZWNpZXMgPSB0aGlzLnNwZWNpZXNEaWN0W2tleV07XHJcblxyXG4gICAgICBpZiAoc3BlY2llcy5udW1PZmZzcHJpbmdzID4gMCkge1xyXG4gICAgICAgIHNwZWNpZXMucmVwcm9kdWNlKCk7XHJcbiAgICAgICAgdGhpcy5wb3B1bGF0aW9uID0gdGhpcy5wb3B1bGF0aW9uLmNvbmNhdChzcGVjaWVzLm9mZnNwcmluZ3MpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZmlsbCB1cCB0aGUgcmVtYWluaW5nIHNwb3RzIChkdWUgdG8gcm91bmRpbmcgZXJyb3JzKSB3aXRoIG5ldyBwbGF5ZXJzXHJcbiAgICBpZiAodGhpcy5wb3B1bGF0aW9uLmxlbmd0aCA8IHRoaXMucG9wdWxhdGlvblNpemUpIHtcclxuICAgICAgbGV0IHJlcHJlc2VudGF0aXZlID0gbmV3IFBsYXllcih0aGlzLmdlbmVyYXRpb24sIHRoaXMubnVtSW5wdXRzLCB0aGlzLm51bU91dHB1dHMsIHRoaXMuYWN0aXZhdGlvbik7XHJcblxyXG4gICAgICByZXByZXNlbnRhdGl2ZS5pbml0aWFsaXplKCk7XHJcbiAgICAgIGNvbnN0IG5ld1NwZWNpZXNJZCA9IE1hdGgubWF4KC4uLk9iamVjdC5rZXlzKHRoaXMuc3BlY2llc0RpY3QpLm1hcChpZCA9PiAraWQpKSArIDE7XHJcblxyXG4gICAgICB0aGlzLnNwZWNpZXNEaWN0W25ld1NwZWNpZXNJZF0gPSBuZXcgU3BlY2llcyhuZXdTcGVjaWVzSWQsIHJlcHJlc2VudGF0aXZlLmNsb25lKCkpO1xyXG4gICAgICB0aGlzLnNwZWNpZXNEaWN0W25ld1NwZWNpZXNJZF0uYXNzaWduVG9TcGVjaWVzKHJlcHJlc2VudGF0aXZlKTtcclxuICAgICAgdGhpcy5wb3B1bGF0aW9uLnB1c2gocmVwcmVzZW50YXRpdmUpO1xyXG5cclxuICAgICAgd2hpbGUgKHRoaXMucG9wdWxhdGlvbi5sZW5ndGggPCB0aGlzLnBvcHVsYXRpb25TaXplKSB7XHJcbiAgICAgICAgbGV0IG5ld1BsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5nZW5lcmF0aW9uLCB0aGlzLm51bUlucHV0cywgdGhpcy5udW1PdXRwdXRzLCB0aGlzLmFjdGl2YXRpb24pO1xyXG5cclxuICAgICAgICBuZXdQbGF5ZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIHRoaXMuc3BlY2llc0RpY3RbbmV3U3BlY2llc0lkXS5hc3NpZ25Ub1NwZWNpZXMobmV3UGxheWVyKTtcclxuICAgICAgICB0aGlzLnBvcHVsYXRpb24ucHVzaChuZXdQbGF5ZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMucG9wdWxhdGlvbjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gIEJJQVM6ICdiaWFzJyxcclxuICBJTlBVVDogJ2lucHV0JyxcclxuICBPVVRQVVQ6ICdvdXRwdXQnLFxyXG4gIEhJRERFTjogJ2hpZGRlbidcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZSB7XHJcbiAgY29uc3RydWN0b3IoaWQsIHR5cGUsIG91dHB1dFZhbHVlID0gMC4wKSB7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5vdXRwdXRWYWx1ZSA9IG91dHB1dFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgY2xvbmUoKSB7XHJcbiAgICByZXR1cm4gbmV3IE5vZGUodGhpcy5pZCwgdGhpcy50eXBlLCB0aGlzLm91dHB1dFZhbHVlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi9jb25maWcuanMnO1xyXG5pbXBvcnQgeyByYW5kb21Eb3VibGVGcm9tSW50ZXJ2YWwgfSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbm5lY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQsIHdlaWdodCwgZW5hYmxlZCwgaW5ub3ZhdGlvbikge1xyXG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xyXG4gICAgdGhpcy5lbmQgPSBlbmQ7XHJcbiAgICB0aGlzLndlaWdodCA9IHdlaWdodDtcclxuICAgIHRoaXMuZW5hYmxlZCA9IGVuYWJsZWQ7XHJcbiAgICB0aGlzLmlubm92YXRpb24gPSBpbm5vdmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgYWRqdXN0V2VpZ2h0KCkge1xyXG4gICAgdGhpcy53ZWlnaHQgKz0gcmFuZG9tRG91YmxlRnJvbUludGVydmFsKFxyXG4gICAgICB0aGlzLndlaWdodCAqIENPTkZJRy5BREpVU1RfV0VJR0hUX0ZBQ1RPUixcclxuICAgICAgLXRoaXMud2VpZ2h0ICogQ09ORklHLkFESlVTVF9XRUlHSFRfRkFDVE9SXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVhc3NpZ25XZWlnaHQoKSB7XHJcbiAgICB0aGlzLndlaWdodCA9IHJhbmRvbURvdWJsZUZyb21JbnRlcnZhbChDT05GSUcuTkVXX1dFSUdIVF9SQU5HRSwgLUNPTkZJRy5ORVdfV0VJR0hUX1JBTkdFKTtcclxuICB9XHJcblxyXG4gIGNsb25lKCkge1xyXG4gICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uKHRoaXMuc3RhcnQsIHRoaXMuZW5kLCB0aGlzLndlaWdodCwgdGhpcy5lbmFibGVkLCB0aGlzLmlubm92YXRpb24pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDT05GSUcgfSBmcm9tICcuL2NvbmZpZy5qcyc7XHJcbmltcG9ydCBQbGF5ZXIgZnJvbSAnLi9wbGF5ZXIuanMnO1xyXG5pbXBvcnQgR2Vub21lIGZyb20gJy4vZ2Vub21lLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwZWNpZXMge1xyXG4gIGNvbnN0cnVjdG9yKGlkLCByZXByZXNlbnRhdGl2ZSkge1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5yZXByZXNlbnRhdGl2ZSA9IHJlcHJlc2VudGF0aXZlO1xyXG4gICAgdGhpcy5maXRuZXNzU3VtID0gMC4wO1xyXG4gICAgdGhpcy5vcmdhbmlzbXMgPSBbXTtcclxuICAgIHRoaXMubnVtT2Zmc3ByaW5ncyA9IDA7XHJcbiAgICB0aGlzLm51bUNsb25pbmcgPSAwO1xyXG4gICAgdGhpcy5udW1Dcm9zc292ZXIgPSAwO1xyXG4gICAgdGhpcy5vZmZzcHJpbmdzID0gW107XHJcbiAgICB0aGlzLmNoYW1waW9uID0ge307XHJcbiAgICB0aGlzLm51bVN0YWduYXRlZCA9IDA7XHJcbiAgfVxyXG5cclxuICBpc1N0YWduYXRlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLm51bVN0YWduYXRlZCA+IDE0O1xyXG4gIH1cclxuXHJcbiAgZHJvcE9yZ2FuaXNtcygpIHtcclxuICAgIHRoaXMub3JnYW5pc21zID0gW107XHJcbiAgICB0aGlzLm9mZnNwcmluZ3MgPSBbXTtcclxuICAgIHRoaXMuZml0bmVzc1N1bSA9IDAuMDtcclxuICAgIHRoaXMubnVtT2Zmc3ByaW5ncyA9IDA7XHJcbiAgICB0aGlzLm51bUNsb25pbmcgPSAwO1xyXG4gICAgdGhpcy5udW1Dcm9zc292ZXIgPSAwO1xyXG4gIH1cclxuXHJcbiAgYXNzaWduVG9TcGVjaWVzKHBsYXllcikge1xyXG4gICAgcGxheWVyLnNwZWNpZXMgPSB0aGlzLmlkO1xyXG4gICAgdGhpcy5vcmdhbmlzbXMucHVzaChwbGF5ZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRqdXN0Rml0bmVzcygpIHtcclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLm9yZ2FuaXNtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICB0aGlzLm9yZ2FuaXNtc1tpXS5maXRuZXNzIC89IHRoaXMub3JnYW5pc21zLmxlbmd0aDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhbGN1bGF0ZUZpdG5lc3NTdW0oKSB7XHJcbiAgICB0aGlzLmZpdG5lc3NTdW0gPSAwLjA7XHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5vcmdhbmlzbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgdGhpcy5maXRuZXNzU3VtICs9IHRoaXMub3JnYW5pc21zW2ldLmZpdG5lc3M7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRDaGFtcGlvbigpIHtcclxuICAgIGlmICh0aGlzLmNoYW1waW9uICYmIE1hdGguYWJzKHRoaXMuY2hhbXBpb24uZml0bmVzcyAtIHRoaXMub3JnYW5pc21zWzBdLmZpdG5lc3MpIDwgQ09ORklHLlNUQUdOQVRJT05fVEhSRVNIT0xEKSB7XHJcbiAgICAgIHRoaXMubnVtU3RhZ25hdGVkKys7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm51bVN0YWduYXRlZCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jaGFtcGlvbiA9IHRoaXMub3JnYW5pc21zWzBdO1xyXG4gIH1cclxuXHJcbiAgaXNDb21wYXRpYmxlV2l0aChwbGF5ZXIpIHtcclxuICAgIGxldCBudW1EaXNqb2ludEdlbmVzID0gMDtcclxuICAgIGxldCBudW1FeGNlc3NHZW5lcyA9IDA7XHJcbiAgICBsZXQgbnVtTWF0Y2hpbmdHZW5lcyA9IDA7XHJcbiAgICBsZXQgc3VtV2VpZ2h0RGlmZmVyZW5jZU1hdGNoaW5nR2VuZXMgPSAwLjA7XHJcblxyXG4gICAgbGV0IHJlcHJlc2VudGF0aXZlSGlnaGVzdElubm92YXRpb24gPSB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zW1xyXG4gICAgICB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLmxlbmd0aCAtIDFcclxuICAgIF0uaW5ub3ZhdGlvbjtcclxuICAgIGxldCBwbGF5ZXJIaWdoZXN0SW5ub3ZhdGlvbiA9IHBsYXllci5icmFpbi5jb25uZWN0aW9uc1twbGF5ZXIuYnJhaW4uY29ubmVjdGlvbnMubGVuZ3RoIC0gMV0uaW5ub3ZhdGlvbjtcclxuXHJcbiAgICBjb25zdCBpbm5vdmF0aW9uU2V0ID0gW1xyXG4gICAgICAuLi5uZXcgU2V0KFtcclxuICAgICAgICAuLi50aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLm1hcChjID0+IGMuaW5ub3ZhdGlvbiksXHJcbiAgICAgICAgLi4ucGxheWVyLmJyYWluLmNvbm5lY3Rpb25zLm1hcChjID0+IGMuaW5ub3ZhdGlvbilcclxuICAgICAgXSlcclxuICAgIF07XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGlubm92YXRpb25TZXQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHRoaXMucmVwcmVzZW50YXRpdmUuYnJhaW4uY29ubmVjdGlvbnMuc29tZShjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkgJiZcclxuICAgICAgICBwbGF5ZXIuYnJhaW4uY29ubmVjdGlvbnMuc29tZShjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgc3VtV2VpZ2h0RGlmZmVyZW5jZU1hdGNoaW5nR2VuZXMgKz0gTWF0aC5hYnMoXHJcbiAgICAgICAgICB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLmZpbmQoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pLndlaWdodCAtXHJcbiAgICAgICAgICAgIHBsYXllci5icmFpbi5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKS53ZWlnaHRcclxuICAgICAgICApO1xyXG4gICAgICAgIG51bU1hdGNoaW5nR2VuZXMrKztcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLmNvbm5lY3Rpb25zLnNvbWUoYyA9PiBjLmlubm92YXRpb24gPT09IGlubm92YXRpb25TZXRbaV0pKSB7XHJcbiAgICAgICAgaWYgKGlubm92YXRpb25TZXRbaV0gPCBwbGF5ZXJIaWdoZXN0SW5ub3ZhdGlvbikge1xyXG4gICAgICAgICAgbnVtRGlzam9pbnRHZW5lcysrO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBudW1FeGNlc3NHZW5lcysrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoaW5ub3ZhdGlvblNldFtpXSA8IHJlcHJlc2VudGF0aXZlSGlnaGVzdElubm92YXRpb24pIHtcclxuICAgICAgICAgIG51bURpc2pvaW50R2VuZXMrKztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbnVtRXhjZXNzR2VuZXMrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhdmdXZWlnaHREaWZmZXJlbmNlTWF0Y2hpbmdHZW5lcyA9XHJcbiAgICAgIG51bU1hdGNoaW5nR2VuZXMgPiAwID8gc3VtV2VpZ2h0RGlmZmVyZW5jZU1hdGNoaW5nR2VuZXMgLyBudW1NYXRjaGluZ0dlbmVzIDogMC4wO1xyXG4gICAgY29uc3QgTiA9IE1hdGgubWF4KFxyXG4gICAgICB0aGlzLnJlcHJlc2VudGF0aXZlLmJyYWluLm5vZGVzLmxlbmd0aCArIHRoaXMucmVwcmVzZW50YXRpdmUuYnJhaW4uY29ubmVjdGlvbnMubGVuZ3RoLFxyXG4gICAgICBwbGF5ZXIuYnJhaW4ubm9kZXMubGVuZ3RoICsgcGxheWVyLmJyYWluLmNvbm5lY3Rpb25zLmxlbmd0aFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAoQ09ORklHLkMxICogbnVtRXhjZXNzR2VuZXMpIC8gTiArXHJcbiAgICAgICAgKENPTkZJRy5DMiAqIG51bURpc2pvaW50R2VuZXMpIC8gTiArXHJcbiAgICAgICAgQ09ORklHLkMzICogYXZnV2VpZ2h0RGlmZmVyZW5jZU1hdGNoaW5nR2VuZXMgPFxyXG4gICAgICBDT05GSUcuQ09NUEFCSUxJVFlfVEhSRVNIT0xEXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc29ydE9yZ2FuaXNtcygpIHtcclxuICAgIHRoaXMub3JnYW5pc21zLnNvcnQoKGEsIGIpID0+IGIuZml0bmVzcyAtIGEuZml0bmVzcyk7XHJcbiAgfVxyXG5cclxuICBjdWxsKCkge1xyXG4gICAgLy8gZG9udCBoYWxmIHBvcHVsYXRpb24gb3RoZXJ3aXNlIHdlIHdvbnQgaGF2ZSB0d28gcGFyZW50c1xyXG4gICAgaWYgKHRoaXMub3JnYW5pc21zLmxlbmd0aCA8IDQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsY3VsYXRlRml0bmVzc1N1bSgpO1xyXG5cclxuICAgIGxldCBzdXJ2aXZvcnMgPSBbXTtcclxuICAgIGxldCBudW1VcHBlckhhbGYgPSBNYXRoLmZsb29yKHRoaXMub3JnYW5pc21zLmxlbmd0aCAvIDIuMCk7XHJcblxyXG4gICAgd2hpbGUgKHN1cnZpdm9ycy5sZW5ndGggPCBudW1VcHBlckhhbGYpIHtcclxuICAgICAgbGV0IHRocmVzaG9sZCA9IE1hdGgucmFuZG9tKCkgKiB0aGlzLmZpdG5lc3NTdW07XHJcbiAgICAgIGxldCBzdW0gPSAwLjA7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3JnYW5pc21zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgc3VtICs9IHRoaXMub3JnYW5pc21zW2ldLmZpdG5lc3M7XHJcblxyXG4gICAgICAgIGlmIChzdW0gPj0gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICBsZXQgc3Vydml2b3IgPSB0aGlzLm9yZ2FuaXNtcy5zcGxpY2UoaSwgMSlbMF07XHJcblxyXG4gICAgICAgICAgc3Vydml2b3JzLnB1c2goc3Vydml2b3IpO1xyXG4gICAgICAgICAgdGhpcy5maXRuZXNzU3VtIC09IHN1cnZpdm9yLmZpdG5lc3M7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9yZ2FuaXNtcyA9IHN1cnZpdm9ycztcclxuICB9XHJcblxyXG4gIHJlcHJvZHVjZSgpIHtcclxuICAgIC8vIGNvcHkgY2hhbXBpb24gdW5jaGFuZ2VkXHJcbiAgICBsZXQgY2hhbXBpb25DbG9uZSA9IHRoaXMuY2hhbXBpb24uY2xvbmUoKTtcclxuXHJcbiAgICBjaGFtcGlvbkNsb25lLmdlbmVyYXRpb24gKz0gMTtcclxuICAgIHRoaXMub2Zmc3ByaW5ncy5wdXNoKGNoYW1waW9uQ2xvbmUpO1xyXG4gICAgaWYgKHRoaXMubnVtQ2xvbmluZyA+IDApIHtcclxuICAgICAgdGhpcy5udW1DbG9uaW5nLS07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm51bUNyb3Nzb3Zlci0tO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNsb25lIDI1JSBhc2V4dWFsXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5udW1DbG9uaW5nOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgbGV0IHRocmVzaG9sZCA9IE1hdGgucmFuZG9tKCkgKiB0aGlzLmZpdG5lc3NTdW07XHJcbiAgICAgIGxldCBzdW0gPSAwLjA7XHJcblxyXG4gICAgICBmb3IgKGxldCBqID0gMCwgbGVuMiA9IHRoaXMub3JnYW5pc21zLmxlbmd0aDsgaiA8IGxlbjI7IGorKykge1xyXG4gICAgICAgIHN1bSArPSB0aGlzLm9yZ2FuaXNtc1tqXS5maXRuZXNzO1xyXG5cclxuICAgICAgICBpZiAoc3VtID49IHRocmVzaG9sZCkge1xyXG4gICAgICAgICAgbGV0IG9mZnNwcmluZyA9IHRoaXMubXV0YXRlKHRoaXMub3JnYW5pc21zW2pdKTtcclxuXHJcbiAgICAgICAgICBvZmZzcHJpbmcuZ2VuZXJhdGlvbisrO1xyXG4gICAgICAgICAgdGhpcy5vZmZzcHJpbmdzLnB1c2gob2Zmc3ByaW5nKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNyb3Nzb3ZlciA3NSVcclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSB0aGlzLm51bUNyb3Nzb3ZlcjsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGxldCB0aHJlc2hvbGQgPSBNYXRoLnJhbmRvbSgpICogdGhpcy5maXRuZXNzU3VtO1xyXG4gICAgICBsZXQgc3VtID0gMC4wO1xyXG4gICAgICBsZXQgcGFyZW50MTtcclxuXHJcbiAgICAgIGZvciAobGV0IGogPSAwLCBsZW4yID0gdGhpcy5vcmdhbmlzbXMubGVuZ3RoOyBqIDwgbGVuMjsgaisrKSB7XHJcbiAgICAgICAgc3VtICs9IHRoaXMub3JnYW5pc21zW2pdLmZpdG5lc3M7XHJcblxyXG4gICAgICAgIGlmIChzdW0gPj0gdGhyZXNob2xkKSB7XHJcbiAgICAgICAgICBwYXJlbnQxID0gdGhpcy5vcmdhbmlzbXNbal07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRocmVzaG9sZCA9IE1hdGgucmFuZG9tKCkgKiB0aGlzLmZpdG5lc3NTdW07XHJcbiAgICAgIHN1bSA9IDAuMDtcclxuICAgICAgbGV0IHBhcmVudDI7XHJcblxyXG4gICAgICBkbyB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxlbjIgPSB0aGlzLm9yZ2FuaXNtcy5sZW5ndGg7IGogPCBsZW4yOyBqKyspIHtcclxuICAgICAgICAgIHN1bSArPSB0aGlzLm9yZ2FuaXNtc1tqXS5maXRuZXNzO1xyXG4gICAgICAgICAgaWYgKHN1bSA+PSB0aHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgcGFyZW50MiA9IHRoaXMub3JnYW5pc21zW2pdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyZXNob2xkID0gTWF0aC5yYW5kb20oKSAqIHRoaXMuZml0bmVzc1N1bTtcclxuICAgICAgICBzdW0gPSAwLjA7XHJcbiAgICAgIH0gd2hpbGUgKHBhcmVudDEgPT09IHBhcmVudDIpO1xyXG5cclxuICAgICAgbGV0IG9mZnNwcmluZyA9IHRoaXMubXV0YXRlKHRoaXMuY3Jvc3NvdmVyKHBhcmVudDEsIHBhcmVudDIpKTtcclxuXHJcbiAgICAgIHRoaXMub2Zmc3ByaW5ncy5wdXNoKG9mZnNwcmluZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBFdmVyeSB0aW1lIHdlIGdldCBhIG5ldyBvZmYgc3ByaW5nLCB0aGVyZSBpcyBhIGNoYW5jZSBmb3IgbXV0YXRpb25cclxuICAvLyBhKSA4MCUgdGhhdCBleGlzdGluZyBjb25uZWN0aW9ucyBnZXQgbXV0YXRlZCAoOTAlIGFkanVzdGVkIDwtPiAxMCUgbmV3IHZhbHVlKVxyXG4gIC8vIGIpIDI1JSB0aGF0IGluaGVyaXRlZCBnZW5lIHdoaWNoIHdhcyBkaXNhYmxlZCBiZWZvcmVoYW5kIChpbiBhbGwgcGFyZW50cykgZ2V0cyBlbmFibGVkIGFnYWluXHJcbiAgLy8gYykgMyUgbmV3IG5vZGVcclxuICAvLyBkKSA1JSAob3IgMzAlIHdoZW4gbGFyZ2UgcG9wdWxhdGlvbikgbmV3IGNvbm5lY3Rpb25cclxuICBtdXRhdGUocGFyZW50KSB7XHJcbiAgICBsZXQgb2Zmc3ByaW5nID0gcGFyZW50LmNsb25lKCk7XHJcblxyXG4gICAgLy8gbXV0YXRlIGNvbm5lY3Rpb25zXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gb2Zmc3ByaW5nLmJyYWluLmNvbm5lY3Rpb25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgQ09ORklHLlBFUkNFTlRBR0VfTVVUQVRJT04pIHtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IENPTkZJRy5QRVJDRU5UQUdFX01VVEFUSU9OX0FESlVTVF9XRUlHSFQpIHtcclxuICAgICAgICAgIG9mZnNwcmluZy5icmFpbi5jb25uZWN0aW9uc1tpXS5hZGp1c3RXZWlnaHQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb2Zmc3ByaW5nLmJyYWluLmNvbm5lY3Rpb25zW2ldLnJlYXNzaWduV2VpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGRpc2FibGVkQ29uZW5jdGlvbnMgPSBvZmZzcHJpbmcuYnJhaW4uY29ubmVjdGlvbnMuZmlsdGVyKGMgPT4gYy5lbmFibGVkID09PSBmYWxzZSk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGRpc2FibGVkQ29uZW5jdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjI1KSB7XHJcbiAgICAgICAgb2Zmc3ByaW5nLmJyYWluLmNvbm5lY3Rpb25zW2ldLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPCBDT05GSUcuUEVSQ0VOVEFHRV9ORVdfTk9ERSkge1xyXG4gICAgICBvZmZzcHJpbmcuYnJhaW4uYWRkTm9kZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgQ09ORklHLlBFUkNFTlRBR0VfTkVXX0NPTk5FQ1RJT04pIHtcclxuICAgICAgb2Zmc3ByaW5nLmJyYWluLmFkZENvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2Zmc3ByaW5nO1xyXG4gIH1cclxuXHJcbiAgY3Jvc3NvdmVyKHBhcmVudDEsIHBhcmVudDIpIHtcclxuICAgIGxldCBicmFpbk9mZnNwcmluZyA9IG5ldyBHZW5vbWUocGFyZW50MS5udW1JbnB1dHMsIHBhcmVudDEubnVtT3V0cHV0cywgcGFyZW50MS5hY3RpdmF0aW9uKTtcclxuXHJcbiAgICBjb25zdCBub2Rlc1NldCA9IFsuLi5uZXcgU2V0KFsuLi5wYXJlbnQxLmJyYWluLm5vZGVzLm1hcChuID0+IG4uaWQpLCAuLi5wYXJlbnQyLmJyYWluLm5vZGVzLm1hcChuID0+IG4uaWQpXSldO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlc1NldC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBpZiAocGFyZW50MS5icmFpbi5ub2Rlcy5zb21lKG4gPT4gbi5pZCA9PT0gbm9kZXNTZXRbaV0pICYmIHBhcmVudDIuYnJhaW4ubm9kZXMuc29tZShuID0+IG4uaWQgPT09IG5vZGVzU2V0W2ldKSkge1xyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XHJcbiAgICAgICAgICBicmFpbk9mZnNwcmluZy5ub2Rlcy5wdXNoKHBhcmVudDEuYnJhaW4ubm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5vZGVzU2V0W2ldKS5jbG9uZSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYnJhaW5PZmZzcHJpbmcubm9kZXMucHVzaChwYXJlbnQyLmJyYWluLm5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBub2Rlc1NldFtpXSkuY2xvbmUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5ub3ZhdGlvblNldCA9IFtcclxuICAgICAgLi4ubmV3IFNldChbXHJcbiAgICAgICAgLi4ucGFyZW50MS5icmFpbi5jb25uZWN0aW9ucy5tYXAoYyA9PiBjLmlubm92YXRpb24pLFxyXG4gICAgICAgIC4uLnBhcmVudDIuYnJhaW4uY29ubmVjdGlvbnMubWFwKGMgPT4gYy5pbm5vdmF0aW9uKVxyXG4gICAgICBdKVxyXG4gICAgXTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gaW5ub3ZhdGlvblNldC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcGFyZW50MS5icmFpbi5jb25uZWN0aW9ucy5zb21lKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKSAmJlxyXG4gICAgICAgIHBhcmVudDIuYnJhaW4uY29ubmVjdGlvbnMuc29tZShjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcclxuICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgICAgIHBhcmVudDEuYnJhaW4uY29ubmVjdGlvbnMuZmluZChjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkuY2xvbmUoKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYnJhaW5PZmZzcHJpbmcuY29ubmVjdGlvbnMucHVzaChcclxuICAgICAgICAgICAgcGFyZW50Mi5icmFpbi5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKS5jbG9uZSgpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBkaXNqb2ludCBhbmQgZXhjZXNzIG5vZGVzXHJcbiAgICAgICAgaWYgKHBhcmVudDEuYnJhaW4uY29ubmVjdGlvbnMuc29tZShjID0+IGMuaW5ub3ZhdGlvbiA9PT0gaW5ub3ZhdGlvblNldFtpXSkpIHtcclxuICAgICAgICAgIGlmIChwYXJlbnQxLmZpdG5lc3MgPj0gcGFyZW50Mi5maXRuZXNzKSB7XHJcbiAgICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgICAgICAgcGFyZW50MS5icmFpbi5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKS5jbG9uZSgpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChwYXJlbnQyLmZpdG5lc3MgPj0gcGFyZW50MS5maXRuZXNzKSB7XHJcbiAgICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLmNvbm5lY3Rpb25zLnB1c2goXHJcbiAgICAgICAgICAgICAgcGFyZW50Mi5icmFpbi5jb25uZWN0aW9ucy5maW5kKGMgPT4gYy5pbm5vdmF0aW9uID09PSBpbm5vdmF0aW9uU2V0W2ldKS5jbG9uZSgpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb25seSBjbG9uZSBub2RlcyB3aGVyZSB3ZSBoYXZlIHJlZmVyZW5jZXMgdG9cclxuICAgIGNvbnN0IG5lZWRlZE5vZGVzU2V0ID0gW1xyXG4gICAgICAuLi5uZXcgU2V0KFsuLi5icmFpbk9mZnNwcmluZy5jb25uZWN0aW9ucy5tYXAoYyA9PiBjLnN0YXJ0KSwgLi4uYnJhaW5PZmZzcHJpbmcuY29ubmVjdGlvbnMubWFwKGMgPT4gYy5lbmQpXSlcclxuICAgIF07XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5lZWRlZE5vZGVzU2V0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGlmICghYnJhaW5PZmZzcHJpbmcubm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5lZWRlZE5vZGVzU2V0W2ldKSkge1xyXG4gICAgICAgIGlmIChwYXJlbnQxLmJyYWluLm5vZGVzLnNvbWUobiA9PiBuLmlkID09PSBuZWVkZWROb2Rlc1NldFtpXSkpIHtcclxuICAgICAgICAgIGJyYWluT2Zmc3ByaW5nLm5vZGVzLnB1c2gocGFyZW50MS5icmFpbi5ub2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gbmVlZGVkTm9kZXNTZXRbaV0pLmNsb25lKCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBicmFpbk9mZnNwcmluZy5ub2Rlcy5wdXNoKHBhcmVudDIuYnJhaW4ubm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5lZWRlZE5vZGVzU2V0W2ldKS5jbG9uZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgb2Zmc3ByaW5nID0gbmV3IFBsYXllcihcclxuICAgICAgcGFyZW50MS5nZW5lcmF0aW9uICsgMSxcclxuICAgICAgcGFyZW50MS5udW1JbnB1dHMsXHJcbiAgICAgIHBhcmVudDEubnVtT3V0cHV0cyxcclxuICAgICAgcGFyZW50MS5hY3RpdmF0aW9uLFxyXG4gICAgICBicmFpbk9mZnNwcmluZyxcclxuICAgICAgcGFyZW50MS5zcGVjaWVzXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBvZmZzcHJpbmc7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBzaWdtb2lkKHgpIHtcclxuICByZXR1cm4gMS4wIC8gKDEuMCArIE1hdGgucG93KE1hdGguRSwgLTQuOSAqIHgpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRhbmgoeCkge1xyXG4gIHJldHVybiBNYXRoLnRhbmgoeCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTdGVwKHgsIHN0ZXAgPSAwLjUpIHtcclxuICByZXR1cm4geCA8IHN0ZXAgPyAwLjAgOiAxLjA7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==